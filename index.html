<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<title>Ilham & Sahitya — Berbagi Hari Spesialku Denganmu</title>
<meta name="theme-color" content="#d3b07b"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@600;700;800&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet"/>

<link rel="icon" href="https://e3k53m4o92i.exactdn.com/wp-content/uploads/2024/10/Garden-03-Bouquet.png?strip=all&lossy=1&ssl=1" sizes="192x192">
<style>
/* =================== TOKENS (light palette) =================== */
:root{
  --c1: 250,246,238; /* base light */
  --c2: 241,229,211; /* warm */
  --accent:#b07a3f;  /* gold-brown */
  --accent2:#7b5530;
  --ink:#2b251f;
  --paper:#fffdf7;
  --line:#eadfcb;
  --gx:50%; --gy:50%;
}
*{box-sizing:border-box; -webkit-tap-highlight-color: transparent}
html,body{margin:0;height:100%;background:rgb(250,246,238);color:var(--ink);font-family:Poppins,system-ui,Segoe UI,Roboto,Arial,sans-serif}
main{max-width:640px;margin:0 auto;position:relative}

/* =================== FIXED BACKGROUND (lebih terang) =================== */
.bg{position:fixed;inset:0;z-index:-3;pointer-events:none;
  background:
    radial-gradient(120vw 120vh at var(--gx) var(--gy), rgba(var(--c1),1) 0%, rgba(var(--c2),.92) 40%, rgba(var(--c1),.92) 100%),
    conic-gradient(from 0deg at 70% 15%, rgba(255,255,255,.75), rgba(255,255,255,.85), rgba(255,255,255,.75));
  transition:background .2s linear;
}
/* halus motif batik (SVG tile) */
.pattern {
  position: fixed;
  inset: 0;
  z-index: -2;
  mix-blend-mode: multiply;
  opacity: .08;
  pointer-events: none;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'><defs><pattern id='p' width='60' height='60' patternUnits='userSpaceOnUse'><path d='M30 3c6 12 6 42 0 54c-6-12-6-42 0-54z' fill='%23c7b08c'/><circle cx='10' cy='10' r='3' fill='%23d9c7a5'/><circle cx='50' cy='50' r='3' fill='%23d9c7a5'/><path d='M0 30h60' stroke='%23d3c2a0' stroke-width='1'/><path d='M30 0v60' stroke='%23d3c2a0' stroke-width='1'/></pattern></defs><rect width='100%' height='100%' fill='url(%23p)'/></svg>");
  background-size: 120px 120px;
}
.filigree{
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
}

/* Kontainer 2 gunungan tengah */
.g-center{
  position: absolute;
  left: 50%; top: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  gap: 20px;          /* jarak antar gunungan tengah */
  z-index: 1;
}

.g-center img{
  height: 300px;      /* ukuran utama */
  width: auto;
  opacity: .95;
  /* filter: grayscale(1); */
}

/* Bayangan kiri & kanan */
.filigree::before,
.filigree::after{
  content: "";
  position: absolute;
  top: 50%;
  width: 240px;       /* ukuran bayangan */
  aspect-ratio: 3/4;
  background: center / contain no-repeat url('assets/images/gunungan.webp');
  transform: translate(-50%, -50%);
  opacity: .7;
  filter: blur(.4px);
  z-index: 0;
}

/* Kiri */
.filigree::before{
  left: calc(50% - 100px);
  animation: swayL 7s ease-in-out infinite;
}

/* Kanan */
.filigree::after{
  left: calc(50% + 100px);
  animation: swayR 7s ease-in-out infinite;
}

/* Animasi goyang */
@keyframes swayL{
  0%,100% { transform: translate(-50%,-50%) translateX(0); }
  50%     { transform: translate(-50%,-50%) translateX(-12px); }
}
@keyframes swayR{
  0%,100% { transform: translate(-50%,-50%) translateX(0); }
  50%     { transform: translate(-50%,-50%) translateX(12px); }
}




/* =================== UTILITIES =================== */
.section{padding:72px 18px; position:relative; overflow:clip}
.center{text-align:center}
.card{ margin-bottom: 7px;
    margin-top:7px; background: rgba(255,255,255,.88); border:1px solid var(--line); border-radius:18px; padding:16px; box-shadow:0 18px 40px #00000012; backdrop-filter:saturate(110%) blur(6px)}
.badge{display:inline-flex;align-items:center;gap:8px;padding:6px 12px;border-radius:999px;background:#f4e8d6;color:var(--accent2);font-weight:700;letter-spacing:.8px}
.pill{display:inline-flex;align-items:center;gap:8px;background:var(--accent);color:#fff;border-radius:999px;padding:10px 14px;font-weight:700;text-decoration:none}
.hr{width:70px;height:3px;background:linear-gradient(90deg,#d7bc94,#b07a3f,#d7bc94);border-radius:2px;margin:10px auto}
.hidden{display:none}

/* =================== OPENING GATE =================== */
#gate{position:fixed;inset:0;z-index:9999;display:grid;place-items:center;background:#0003}
.gate{width:92vw;max-width:420px;border-radius:26px;overflow:hidden;position:relative;border:1px solid #ffffff80}
.gate .ph{aspect-ratio:3/5;background:url('https://images.unsplash.com/photo-1606800052052-a08af7148866?q=80&w=1200&auto=format&fit=crop') center/cover no-repeat;filter:brightness(.9)}
.gate .ov{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;padding:22px 20px 18px;color:#2b251f;text-align:center;background:linear-gradient(180deg,rgba(255,255,255,0) 40%,rgba(255,255,255,.95))}
.brand{font-family:"Great Vibes",cursive;font-size:36px}
.names{font-family:"Playfair Display",serif;font-weight:800;font-size:26px;letter-spacing:2px;margin-top:2px}
.btn{display:inline-flex;gap:8px;align-items:center;justify-content:center;border:0;border-radius:999px;padding:12px 16px;font-weight:800}
.btn-primary{background:var(--accent);color:#fff;box-shadow:0 12px 26px #b07a3f44;margin-top:12px}
.mag{position:relative;transition:transform .15s}

/* =================== HERO =================== */
.hero{padding:0px}
.slider {
  position: relative;
  width: 100%;
  height: 68vh;
  max-height: 740px;
  border-radius: 0 0 22px 22px; /* atas rata, bawah melengkung */
  overflow: hidden;
  box-shadow: 0 14px 34px #00000014;
  transform: translateZ(0);
}

.slide{position:absolute;inset:0;background-size:cover;background-position:center;opacity:0;transition:opacity .9s ease, transform 9s ease;transform:scale(1.06)}
.slide.active{opacity:1;transform:scale(1.0)}
.overlay-soft {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    to top,
    rgba(248, 237, 220, 0.9) 0%,    /* pekat di paling bawah */
    rgba(248, 237, 220, 0.65) 25%,  /* masih cukup pekat */
    rgba(248, 237, 220, 0.35) 55%,  /* mulai memudar */
    rgba(248, 237, 220, 0) 100%     /* full transparan di atas */
  );
}


.hero-txt{position:absolute;inset:auto 0 10px 0;z-index:2;text-align:center;color:#2c241f;text-shadow:0 2px 10px #ffffffa0}
.hero-txt .sub{font-family:"Great Vibes",cursive;font-size:28px}
.hero-txt h1{font-family:"Playfair Display",serif;font-size:36px;letter-spacing:2px;margin:4px 0 0}
.hero-txt .date{letter-spacing:4px;font-weight:700;margin-top:6px}
.scroll-ico{width:26px;height:42px;border:2px solid var(--accent2);border-radius:16px;margin:12px auto 2px;position:relative}
.scroll-ico:after{content:"";position:absolute;left:50%;top:6px;transform:translateX(-50%);width:6px;height:10px;border-radius:3px;background:var(--accent2);animation:wheel 1.6s infinite}
@keyframes wheel{0%{opacity:0;transform:translate(-50%,0)}40%{opacity:1}100%{opacity:0;transform:translate(-50%,12px)}}

/* ornamen gunungan kecil mengapung */
.orn{position:absolute;opacity:.20;pointer-events:none}
.orn.a{top:10px;left:10px;width:120px;animation:float 12s ease-in-out infinite}
.orn.b{top:10px;right:10px;width:120px;animation:float 14s ease-in-out reverse infinite}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}

/* tilt parallax */
.tilt{transform-style:preserve-3d;perspective:1000px}
.tilt .slide{transform:translateZ(0) rotateX(calc(var(--ty,0)*1deg)) rotateY(calc(var(--tx,0)*1deg)) scale(1.05)}

/* Save the date */
.save{color:#2c241f}
.count{display:flex;justify-content:center;gap:12px;margin:14px 0}
.count .box{width:68px;background:#fff;border:1px solid var(--line);color:#2f2621;text-align:center;border-radius:12px;padding:10px 6px;font-weight:800}
.count small{display:block;font-size:11px;opacity:.7;margin-top:3px}
/* CARD krem + border hitam */
.card-cream{
  position: relative;
  background: rgba(255,255,255,.88);                 /* krem */
  border: 2px solid #d9b98a;           /* warna border */
  border-radius: 22px;
  padding: 18px 16px 22px;
  width: min(100% - 24px, 680px);
  margin: 12px auto;
  overflow: hidden;
  /* shadow luar: tint sesuai border (#d9b98a) */
  box-shadow: 0 14px 28px rgba(217,185,138, .35);
}

/* Inner shadow cekung, tanpa hitam – pakai tint coklat krem */
.card-inset{
  box-shadow:
    inset 0 22px 48px rgba(184,147,99, .35),   /* atas agak gelap (tinted) */
    inset 0 -18px 38px rgba(184,147,99, .22),  /* bawah halus */
    inset 0 0 0 1px rgba(255,248,237, .35),    /* inner highlight tipis */
    0 14px 28px rgba(217,185,138, .35);        /* ulangi shadow luar */
}

/* Smooth anchor scroll seluruh halaman */
html { scroll-behavior: smooth; }

/* --- Bouquet swapped --- */
.card-bouquet::before,
.card-bouquet::after{
     z-index: 0;
  content:"";
  position:absolute; pointer-events:none;
  background-image:url('https://e3k53m4o92i.exactdn.com/wp-content/uploads/2024/10/Garden-03-Bouquet.png?strip=all&lossy=1&ssl=1');
  background-repeat:no-repeat; background-size:contain; background-position:center;
  opacity:0; transform-origin:center; will-change:transform,opacity; z-index:0;
}

/* BAWAH-KIRI (sebelumnya atas-kiri) */
/* .card-bouquet::before{
  width:56%; aspect-ratio:1/1;
  left:-8%; bottom:-18%;
  transform: translate(-20%, 20%) rotate(10deg) scale(.94);
} */

/* ATAS-KANAN (sebelumnya bawah-kanan) */
.card-bouquet::after{
  width:56%; aspect-ratio:1/1;
  right:-8%; top:-14%;
  transform: translate(20%, -20%) rotate(-10deg) scale(.94);
}

/* saat terlihat */
.card-bouquet.show-flowers::before{
  animation:
    bouquetInBL 1.05s cubic-bezier(.22,.61,.36,1) forwards,
    bouquetFloat 9s ease-in-out 1.05s infinite;
}
.card-bouquet.show-flowers::after{
  animation:
    bouquetInTR 1.05s cubic-bezier(.22,.61,.36,1) .18s forwards,
    bouquetFloat 9s ease-in-out 1.23s infinite reverse;
}

/* Entry dari Bawah-Kiri */
@keyframes bouquetInBL{
  0%   {opacity:0; transform: translate(-20%, 20%) rotate(10deg) scale(.94);}
  60%  {opacity:1;}
  100% {opacity:1; transform: translate(0,0) rotate(0) scale(1);}
}
/* Entry dari Atas-Kanan */
@keyframes bouquetInTR{
  0%   {opacity:0; transform: translate(20%, -20%) rotate(-10deg) scale(.94);}
  60%  {opacity:1;}
  100% {opacity:1; transform: translate(0,0) rotate(0) scale(1);}
}
/* Float halus setelah masuk */
@keyframes bouquetFloat{
  0%,100% { transform: translate(0,0) rotate(0) scale(1); }
  50%     { transform: translate(0,-6px) rotate(1.2deg) scale(1.01); }
}

/* Hormati preferensi aksesibilitas */
@media (prefers-reduced-motion: reduce){
  .card-bouquet::before,
  .card-bouquet::after{ animation: none !important; opacity:.9; transform:translate(0,0) scale(1); }
}



/* Events + Maps */
.event .head{font-family:"Playfair Display",serif;font-size:26px;margin:6px 0 10px;color:var(--accent2)}
.mapwrap{position:relative;z-index:1;margin-top:10px;border-radius:14px;overflow:hidden;border:1px solid var(--line)}
.mapwrap iframe{display:block;width:100%;height:220px;border:0}

/* Gallery */
/* .gallery{position:relative;z-index:2;display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
.gallery img{border-radius:12px;aspect-ratio:3/4;object-fit:cover;cursor:pointer;transition:transform .2s ease; height: 220px;}
.gallery img:active{transform:scale(.98)} */

/* Lightbox */
.lb{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:#000d;z-index:9990}
.lb.open{display:flex}
.lb .stage{position:relative;width:92vw;height:86vh}
.lb img{position:absolute;inset:0;margin:auto;max-width:100%;max-height:100%;border-radius:14px;box-shadow:0 24px 40px #0006}
.nav{position:absolute;top:50%;transform:translateY(-50%);width:44px;height:44px;border:0;border-radius:50%;display:grid;place-items:center;background:#0007;color:#fff}
.nav.prev{left:8px}.nav.next{right:8px}
.close{z-index: 99; position:absolute;top:8px;right:8px;border:0;border-radius:999px;background:#b07a3f;color:#fff;padding:8px 11px}

/* Gift & QRIS */
.copyrow{display:grid;gap:10px}
.bank{display:flex;justify-content:space-between;gap:10px;align-items:center;background:#fff;border:1px solid var(--line);border-radius:12px;padding:10px}
.bank .meta{font-size:14px}
.btn-mini{background:var(--accent2);color:#fff;border:0;border-radius:10px;padding:8px 10px;font-weight:800}

/* Modal QRIS */
.modal{position:fixed;inset:0;background:#000a;display:none;align-items:center;justify-content:center;z-index:9992}
.modal.open{display:flex}
.modal .box{background:#fff;border:1px solid var(--line);border-radius:16px;padding:12px;width:min(92vw,420px)}
.modal .box img{width:100%;border-radius:10px}
.modal .top{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.modal .top h4{margin:0}

/* Wishes */
.form{display:grid;gap:10px}
.form input,.form textarea,.form select{width:100%;padding:12px;border:1px solid var(--line);border-radius:12px;background:#fff;font:inherit}
.form button{background:var(--accent2);color:#fff;border:0;border-radius:12px;padding:12px 14px;font-weight:800}
.badge-in{display:inline-block;margin-top:6px;padding:4px 10px;border-radius:999px;font-weight:700}
.in{background:#e7f6ea;border:1px solid #b7e0c0}
.out{background:#ffe8e8;border:1px solid #ffd0d0}


/* Footer + petals */
footer{padding:68px 18px 96px}
footer h3{font-family:"Great Vibes",cursive;font-size:44px;margin:0 0 8px;color:#33291f}
.particles{pointer-events:none;position:absolute;inset:0}
.particles span{position:absolute;bottom:-30px;width:10px;height:10px;border-radius:50%;
  background:radial-gradient(#d9b98a,#e7d6b900 60%);box-shadow:0 0 8px #dabb8a80;animation:rise 12s linear infinite}
@keyframes rise{0%{transform:translateY(0) scale(.7);opacity:.0}10%{opacity:.85}100%{transform:translateY(-120vh) scale(1.05);opacity:0}}

.music{position:fixed;right:14px;bottom:14px;width:56px;height:56px;border-radius:50%;background:#fff;border:2px solid var(--accent2);display:grid;place-items:center;z-index:9993;box-shadow:0 8px 18px #0002}

/* Reveals */
.reveal{opacity:0;transform:translateY(22px) scale(.99);transition:opacity .8s ease, transform .8s ease}
.reveal.on{opacity:1;transform:translateY(0) scale(1)}
.reveal[data-variant="L"]{transform:translateX(-24px)}
.reveal[data-variant="R"]{transform:translateX(24px)}
.reveal[data-variant="L"].on,.reveal[data-variant="R"].on{transform:translateX(0)}

/* Ripple */
.ripple{position:relative;overflow:hidden}
.ripple::after{content:"";position:absolute;inset:auto;width:0;height:0;border-radius:50%;background:rgba(255,255,255,.4);transform:translate(-50%,-50%);pointer-events:none;animation:rip .6s ease-out forwards}
@keyframes rip{from{width:0;height:0;opacity:.8}to{width:180px;height:180px;opacity:0}}

/* mobile-only polish */
@media (min-width:768px){ body{display:grid;place-items:center} }
</style>
</head>
<body>
<!-- IO PATCH — taruh PALING ATAS (dalam <head>) -->
<script>
(function(){
  if (typeof window.IntersectionObserver !== 'function') return;
  var Native = window.IntersectionObserver;
  window.IntersectionObserver = function (cb, options) {
    options = options || {};
    var rm = (options.rootMargin != null ? String(options.rootMargin) : '0px 0px -12% 0px').trim();
    var safe = rm.split(/\s+/).map(function(v){
      if (v === '0') return '0px';
      if (/^-?\d+(\.\d+)?(px|%)$/.test(v)) return v;   // sudah valid
      if (/^-?\d+(\.\d+)?$/.test(v)) return v + 'px'; // angka → px
      return '0px';
    }).join(' ');
    return new Native(cb, Object.assign({}, options, { rootMargin: safe }));
  };
})();
</script>

<!-- ===== fixed BG, motif & filigree (ornamen) ===== -->
<div class="bg" id="bg"></div>
<div class="pattern"></div>
<div class="filigree">
  <div class="g-center">
    <!-- <img src="assets/images/gunungan.webp" alt="Gunungan 1"> -->
    <img src="assets/images/gunungan2.png" alt="Gunungan 2">
  </div>
</div>


<main>

<!-- ===== MUSIC BTN ===== -->
<button class="music mag" id="musicBtn" aria-label="musik"><i class="fa-solid fa-music"></i></button>
<audio id="bgm" loop>
  <!-- EDIT DI SINI: musik -->
  <source src="assets/music/music.mp3" type="audio/mp3"/>
</audio>

<!-- ===== OPENING GATE ===== -->
<!-- ===== GATE (auto-guest-name) ===== -->
<div id="gate" role="dialog" aria-modal="true">
  <div class="gate">
    <div class="ph"></div>
    <div class="ov">
      <div class="brand">The Wedding of</div>
      <div class="names">ILHAM &amp; SAHITYA</div>
      <p id="guest" style="margin:8px 0 0;opacity:.95">Kepada Yth. Bapak/Ibu</p>
      <button id="openBtn" class="btn btn-primary ripple mag">
        <i class="fa-solid fa-envelope-open-text"></i> Buka Undangan
      </button>
    </div>
  </div>
</div>

<script>
/* Auto isi "Kepada Yth." dari URL: ?name=..., #name=..., atau /name=... */
(function () {
  const el = document.getElementById('guest');
  if (!el) return;

  function getParamFromHash(hash) {
    const h = hash.replace(/^#/, '');
    const sp = new URLSearchParams(h.includes('=') && !h.includes('&') ? '?' + h : h);
    return sp.get('name') || sp.get('to') || sp.get('guest') || '';
  }

  function getInvitee() {
    const url = new URL(window.location.href);

    // 1) ?name= / ?to= / ?guest=
    let raw = url.searchParams.get('name') || url.searchParams.get('to') || url.searchParams.get('guest');

    // 2) #name=... atau #...&name=...
    if (!raw && url.hash) raw = getParamFromHash(url.hash);

    // 3) /name=... atau /to=... di pathname
    if (!raw) {
      const m = url.pathname.match(/(?:^|\/)(?:name|to|guest)=([^/?#]+)/i);
      if (m) raw = m[1];
    }

    if (!raw) return '';

    // Decode + rapi
    try { raw = decodeURIComponent(raw.replace(/\+/g, ' ')); } catch(e){}
    raw = raw.replace(/[_-]+/g, ' ').replace(/\s+/g, ' ').trim();

    // Capitalize ringan (opsional)
    if (raw.length <= 60) {
      raw = raw.split(' ').map(w => w ? w[0].toUpperCase() + w.slice(1) : '').join(' ');
    }
    return raw;
  }

  const name = getInvitee();
  if (name) el.textContent = 'Kepada Yth. ' + name;

  // (Opsional) auto-klik buka undangan jika ada nama di URL:
  if (name) document.getElementById('openBtn')?.click();
})();
</script>




<!-- ===== HERO ===== -->
<header class="hero section center" data-bg="#fffaf2,#efe1c9">
  <!-- gunungan kecil -->
  <img class="orn a" src="assets/images/gunungan.webp" alt="">
  <img class="orn b" src="assets/images/gunungan.webp" alt="">
  <div class="slider tilt" id="slider">
    <!-- EDIT DI SINI: foto hero -->
    <div class="slide active" style="background-image:url('assets/images/slide1.jpg')"></div>
    <div class="slide" style="background-image:url('assets/images/slide2.jpg')"></div>
    <div class="slide" style="background-image:url('assets/images/slide3.jpg')"></div>
    <div class="slide" style="background-image:url('assets/images/slide4.jpg')"></div>
    <div class="overlay-soft"></div>
    <div class="hero-txt">
      <div class="sub animate-words">The Wedding of</div>
      <h1 class="reveal animate-words" data-variant="L">ILHAM  <span style="color:#b07a3f">&amp;</span>  SAHITYA</h1>
      <div class="date reveal animate-words" data-variant="R">02 • 10 • 2025</div>
      <div class="scroll-ico" aria-hidden="true"></div>
    </div>
  </div>
</header>

<!-- ===== COUPLE & QUOTE ===== -->
<section class="section" data-bg="#fff8ec,#f8eddc">
  <div class="card reveal" id="qCard">
    <div class="center">
      <i class="fa-solid fa-archway anim-arch" style="color:#b07a3f;font-size:28px"></i>
      <div class="hr anim-hr"></div>
    </div>

    <!-- EDIT DI SINI: foto -->
    <div style="display:flex; justify-content:center; margin-top:8px;">
      <span class="photo-mask anim-img">
        <img src="assets/images/gambarutama.jpg" alt="Ilham & Sahitya">
      </span>
    </div>

    <p class="anim-para" style="line-height:1.8;margin-top:12px">
      “Dan di antara tanda-tanda (kebesaran)-Nya ialah Dia menciptakan pasangan-pasangan untukmu agar kamu
      cenderung dan merasa tenteram kepadanya, dan Dia menjadikan di antaramu rasa kasih dan sayang.”
      <br><b>QS. Ar-Rum : 21</b>
    </p>
  </div>
</section>


<style>
    /* Garis dekor di bawah ikon */
.center .hr{
  height:2px; width:96px; margin:6px auto 0;
  background: linear-gradient(90deg, transparent, #b07a3f, transparent);
  border-radius:99px;
}

/* --- VARIASI ANIMASI --- */

/* Icon: pop + wobble */
.anim-arch{
  display:inline-block;
  opacity:0;
  transform: translateY(-8px) rotate(-12deg) scale(.8);
  transition: transform .7s cubic-bezier(.22,.61,.36,1), opacity .7s;
}
.anim-arch.show{
  opacity:1; transform: translateY(0) rotate(0) scale(1);
  animation: archBob 6s ease-in-out 1.1s infinite;
}
@keyframes archBob{
  0%,100%{ transform: translateY(0) rotate(0) }
  50%    { transform: translateY(-2px) rotate(1deg) }
}

/* HR: grow dari tengah */
.anim-hr{
  transform-origin: center;
  transform: scaleX(0);
  opacity:0;
  transition: transform .7s cubic-bezier(.22,.61,.36,1), opacity .7s;
}
.anim-hr.show{
  transform: scaleX(1);
  opacity:1;
}

/* Foto: reveal clip-path + Ken Burns */
.photo-mask{
  display:inline-block;
  border-radius:14px; overflow:hidden;
}
.photo-mask img{
  display:block; height:205px; width:auto;
  transform: scale(1.08) translateY(8px);
  transition: transform 5s ease-out;
}
.anim-img{
  clip-path: inset(0 0 100% 0 round 14px);
  transition: clip-path .9s cubic-bezier(.22,.61,.36,1);
}
.anim-img.show{
  clip-path: inset(0 0 0 0 round 14px);
}
.anim-img.show img{
  transform: scale(1.02) translateY(0);
}

/* Ayat: flip 3D dari atas */
.anim-para{
  opacity:0;
  transform-origin: top center;
  transform: perspective(600px) rotateX(-35deg) translateY(12px);
  filter: blur(3px);
  transition: transform .8s cubic-bezier(.22,.61,.36,1), opacity .8s, filter .8s;
}
.anim-para.show{
  opacity:1; filter: blur(0);
  transform: perspective(600px) rotateX(0) translateY(0);
}

/* Aksesibilitas */
@media (prefers-reduced-motion: reduce){
  .anim-arch,.anim-hr,.anim-img,.anim-para{ transition:none; animation:none !important; }
  .anim-arch,.anim-hr,.anim-img,.anim-para{ opacity:1; transform:none; clip-path:none; }
}

</style>


<script>
  (function(){
    const card = document.getElementById('qCard');
    if(!card) return;
    const items = [
      card.querySelector('.anim-arch'),
      card.querySelector('.anim-hr'),
      card.querySelector('.anim-img'),
      card.querySelector('.anim-para')
    ].filter(Boolean);

    // Delay berurutan 0, 120, 240, 360 ms
    items.forEach((el,i)=> el.style.transitionDelay = (i*120)+'ms');

    const io = new IntersectionObserver((entries)=>{
      entries.forEach(entry=>{
        if(entry.isIntersecting){
          items.forEach(el=> el.classList.add('show'));
        }else{
          // biar muncul lagi kalau scroll balik
          items.forEach(el=> el.classList.remove('show'));
        }
      });
    }, { threshold:0.15, rootMargin:"0px 0px -10% 0px" });

    io.observe(card);
  })();
</script>

<!-- ========== COUPLE (CENTERED in TRANSPARENT CARD) ========== -->
<section class="section" data-bg="#fff8ec,#f7ead2">
  <div class="glass-card revealCard" id="coupleGlass">
    <!-- Hero -->
    <div class="hero c-anim">
      <i class="fa-solid fa-heart" style="font-size:26px;color:#b07a3f"></i>
      <h3 class="weare">We Are</h3>
      <h2 class="getting">Getting Married!</h2>
      <p class="doa">
        Maha Suci Allah yang telah menciptakan makhluk-Nya berpasang-pasangan.
        Ya Allah semoga ridho-Mu tercurah mengiringi pernikahan kami:
      </p>
    </div>

    <!-- Ilham -->
    <article class="profile c-anim">
      <div class="avatar">
        <span class="ph"><img src="assets/images/ilham.jpg" alt="Ilham"></span>
      </div>
      <h3 class="nama">Ilham Putra Permana</h3>
      <p class="ket"><small>Putra dari</small><br><b>Bapak Mudro Irawan Bhakti (Alm)</b> & <b>Ibu Nur Wahyuni (Alm)</b></p>
      <a class="ig" href="https://instagram.com/ilhampe" target="_blank" rel="noopener">
        <i class="fa-brands fa-instagram"></i> @ilham.pe
      </a>
    </article>

    <div class="ampersand c-anim">&amp;</div>

    <!-- Sahitya -->
    <article class="profile c-anim">
      <div class="avatar">
        <span class="ph"><img src="assets/images/tya.jpg" alt="Sahitya"></span>
      </div>
      <h3 class="nama">Sahitya Nashiroh</h3>
      <p class="ket"><small>Putri dari</small><br><b>Bapak Budi Warsito</b> & <b>Ibu Partiana</b></p>
      <a class="ig" href="https://instagram.com/sahityansrh" target="_blank" rel="noopener">
        <i class="fa-brands fa-instagram"></i> @sahityansrh
      </a>
    </article>
  </div>
</section>

<style>
  /* ===== Transparent (Glass) Card ===== */
  .glass-card{
    position:relative; overflow:visible;
    width:min(100% - 28px, 760px);
    margin:16px auto; padding:18px 14px 20px;
    border-radius:22px;
    background: rgba(255,255,255,.45);
    border:2px solid rgba(176,122,63,.55);            /* coklat transparan */
    box-shadow: 0 14px 28px rgba(0,0,0,.10);
    backdrop-filter: blur(8px) saturate(115%);
    -webkit-backdrop-filter: blur(8px) saturate(115%);
  }
  .glass-card::before{ /* shine halus */
    content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none;
    background: radial-gradient(120% 100% at 50% -10%, rgba(255,255,255,.6) 0%, rgba(255,255,255,0) 55%);
  }

  /* ===== Typography & layout ===== */
  #coupleGlass{ text-align:center }
  #coupleGlass .weare{
    margin:.4rem 0 0; font-family:'Playfair Display', serif; font-weight:400; font-size:22px;
  }
  #coupleGlass .getting{
    margin:.2rem 0 .5rem; font-family:'Great Vibes', cursive; font-size:42px;
  }
  #coupleGlass .doa{ max-width:58ch; margin:0 auto 12px; opacity:.95; margin-bottom: 35px; }

  .profile{ margin:10px 0 6px }
  .profile .nama{ margin:.6rem 0 .2rem; font-family:'Playfair Display',serif; font-size:22px }
  .profile .ket{ margin:0 0 .4rem }

  /* ===== Avatar bulat + frame + bouquet ===== */
  .avatar{ position:relative; width:214px; height:214px; margin:8px auto }
  .avatar .ph{
    position:absolute; inset:0; border-radius:999px; overflow:hidden;
    border:6px solid #d9b98a;                        /* frame luar */
    box-shadow: inset 0 0 0 3px #fffdf8, 0 10px 28px rgba(0,0,0,.10);
    display:block;
  }
  .avatar img{
    width:100%; height:100%; object-fit:cover; display:block;
    transform: scale(1.06) translateY(6px);
    transition: transform 6s ease-out;
  }
  .profile:hover .avatar img{ transform: scale(1.10) translateY(0) }

  /* Bouquet dekor (tidak terpotong karena ditempel di .avatar, bukan .ph) */
  .avatar::before,
  .avatar::after{
    content:""; position:absolute; pointer-events:none;
    background-image:url('https://e3k53m4o92i.exactdn.com/wp-content/uploads/2024/10/Garden-03-Bouquet.png?strip=all&lossy=1&ssl=1');
    background-repeat:no-repeat; background-size:contain;
    filter: drop-shadow(0 8px 16px rgba(217,185,138,.5));
  }

  .avatar::after{  /* atas kanan */
    width:54%; aspect-ratio:1/1; right:-12%; top:-20%;  transform:rotate(-12deg);
  }

  /* IG pill */
  .ig{
    display:inline-flex; align-items:center; gap:8px; margin:.4rem 0 0;
    padding:8px 12px; border-radius:999px; border:1px solid #b07a3f;
    color:#6a4a2a; background:#fff; text-decoration:none; font-weight:600;
    box-shadow:0 6px 14px rgba(176,122,63,.18);
    transition: transform .2s, background .2s, box-shadow .2s;
  }
  .ig:hover{ transform:translateY(-1px) scale(1.03); background:#fffaf3 }
  .ig:active{ transform:scale(.97) }
  .ig i{ font-size:18px }

  .ampersand{ font-family:'Playfair Display',serif; font-size:32px; color:#b07a3f; margin:6px 0 }

  /* ===== Animations ===== */
  .revealCard{ opacity:0; transform: translateY(14px) scale(.98); filter:blur(3px);
    transition: transform .7s cubic-bezier(.22,.61,.36,1), opacity .7s, filter .7s; }
  .revealCard.on{ opacity:1; transform:none; filter:none }

  .c-anim{ opacity:0; transform: translateY(14px); filter: blur(3px);
    transition: transform .75s cubic-bezier(.22,.61,.36,1), opacity .75s, filter .75s; }
  .c-anim.on{ opacity:1; transform:none; filter:none }

  /* Aksesibilitas */
  @media (prefers-reduced-motion:reduce){
    .revealCard,.c-anim{ transition:none !important; opacity:1; transform:none; filter:none }
    .avatar img{ transition:none }
  }
</style>

<script>
  // Card + isi muncul berurutan saat terlihat; retrigger bila discroll balik
  (function(){
    const card = document.getElementById('coupleGlass');
    if(!card) return;

    const ioCard = new IntersectionObserver((e)=>{
      e.forEach(x=>{
        if(x.isIntersecting) card.classList.add('on');
        else card.classList.remove('on');
      });
    }, {threshold:.15, rootMargin:'0px 0px -10% 0px'});
    ioCard.observe(card);

    const children = [...card.querySelectorAll('.c-anim')];
    children.forEach((el,i)=> el.style.transitionDelay = (150 + i*110) + 'ms');

    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting) e.target.classList.add('on');
        else e.target.classList.remove('on');
      });
    }, {threshold:.15, rootMargin:'0px 0px -10% 0px'});
    children.forEach(el=> io.observe(el));
  })();
</script>

<!-- ===== SAVE THE DATE ===== -->
<section class="section save center" data-bg="#fff4e1,#f7ead2">
  <div class="card-cream card-inset" id="saveCard">
    <i class="fa-solid fa-calendar-heart anim-pop" style="font-size:28px;color:#b07a3f"></i>
    <h2 class="anim-up" style="font-family:'Great Vibes',cursive;font-size:40px;margin:8px 0 0">Save The Date</h2>

    <div class="count anim-stagger" id="count">
      <div class="box"><div id="d">0</div><small>Hari</small></div>
      <div class="box"><div id="h">0</div><small>Jam</small></div>
      <div class="box"><div id="m">0</div><small>Menit</small></div>
      <div class="box"><div id="s">0</div><small>Detik</small></div>
    </div>

    <p class="anim-fade" style="opacity:.95;margin:0 12px">
      Dengan memohon rahmat dan ridho Allah SWT, kami mengundang Bapak/Ibu/Saudara/i untuk menghadiri pernikahan kami.
    </p>
  </div>
</section>


<style>
    /* Icon: pop + wobble tipis */
#saveCard .anim-pop{
  display:inline-block; opacity:0;
  transform: translateY(-10px) scale(.85) rotate(-10deg);
  transition: transform .7s cubic-bezier(.22,.61,.36,1), opacity .7s;
}
#saveCard .anim-pop.show{
  opacity:1; transform: translateY(0) scale(1) rotate(0);
  animation: wob 6s ease-in-out 1.2s infinite;
}
@keyframes wob{ 0%,100%{transform:translateY(0) scale(1)} 50%{transform:translateY(-2px) scale(1.02)} }

/* Heading: slide-up + de-blur */
#saveCard .anim-up{
  opacity:0; filter:blur(3px); transform: translateY(12px);
  transition: transform .7s cubic-bezier(.22,.61,.36,1), opacity .7s, filter .7s;
}
#saveCard .anim-up.show{ opacity:1; filter:blur(0); transform: translateY(0); }

/* Paragraf: fade-in lembut */
#saveCard .anim-fade{ opacity:0; transform: translateY(8px);
  transition: transform .7s cubic-bezier(.22,.61,.36,1), opacity .7s; }
#saveCard .anim-fade.show{ opacity:1; transform: none; }

/* Counter: anak2 stagger otomatis */
#saveCard .anim-stagger{ opacity:1; } /* kontainer tetap terlihat */
#saveCard .anim-stagger .box{
  opacity:0; transform: translateY(10px) scale(.98);
  transition: transform .55s cubic-bezier(.22,.61,.36,1), opacity .55s;
}
#saveCard .anim-stagger.show .box{ opacity:1; transform: none; }
#saveCard .anim-stagger .box:nth-child(1){ transition-delay: 80ms; }
#saveCard .anim-stagger .box:nth-child(2){ transition-delay: 160ms; }
#saveCard .anim-stagger .box:nth-child(3){ transition-delay: 240ms; }
#saveCard .anim-stagger .box:nth-child(4){ transition-delay: 320ms; }

/* (Opsional) haluskan bila user minta reduce motion */
@media (prefers-reduced-motion: reduce){
  #saveCard .anim-pop, #saveCard .anim-up, #saveCard .anim-fade,
  #saveCard .anim-stagger .box{ transition:none; animation:none !important; opacity:1; transform:none; filter:none; }
}

</style>

<script>
(function(){
  const card = document.getElementById('saveCard');
  if(!card) return;

  const icon  = card.querySelector('.anim-pop');
  const head  = card.querySelector('.anim-up');
  const para  = card.querySelector('.anim-fade');
  const count = card.querySelector('.anim-stagger');

  // Set delay berurutan simple
  if (icon) icon.style.transitionDelay = '0ms';
  if (head) head.style.transitionDelay = '120ms';
  if (count) count.style.transitionDelay = '240ms';
  if (para) para.style.transitionDelay = '360ms';

  const io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        card.classList.add('show-flowers');      // kalau kamu pakai efek bouquet sebelumnya
        icon && icon.classList.add('show');
        head && head.classList.add('show');
        count && count.classList.add('show');
        para && para.classList.add('show');
      }else{
        // re-trigger saat scroll naik/turun
        icon && icon.classList.remove('show');
        head && head.classList.remove('show');
        count && count.classList.remove('show');
        para && para.classList.remove('show');
        card.classList.remove('show-flowers');
      }
    });
  }, { threshold: 0.15, rootMargin: "0px 0px -10% 0px" });

  io.observe(card);
})();
</script>

<script>
  const saveCard = document.getElementById('saveCard');
  if (saveCard){
    const io = new IntersectionObserver((entries)=>{
      for (const e of entries){
        if (e.isIntersecting){
          saveCard.classList.add('show-flowers');
          io.unobserve(saveCard); // cukup sekali
        }
      }
    }, {
      threshold: 0.15,             // muncul saat 15% card terlihat
      rootMargin: "0px 0px -15% 0" // pre-trigger sebelum full masuk
    });
    io.observe(saveCard);
  }
</script>



<!-- Confetti CDN -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
  // Target: 2 Oktober 2025 00:00:00 (ikut zona waktu pengunjung)
  const target = new Date(2025, 9, 2, 0, 0, 0).getTime(); // bulan 9 = Oktober (0-based)
  const elD = document.getElementById('d');
  const elH = document.getElementById('h');
  const elM = document.getElementById('m');
  const elS = document.getElementById('s');
  const countWrap = document.getElementById('count');

  let fired = false;
  const tick = setInterval(() => {
    const now = Date.now();
    let diff = target - now;

    if (diff <= 0) {
      // set 0 semua
      elD.textContent = elH.textContent = elM.textContent = elS.textContent = '0';
      if (!fired) {
        fired = true;
        clearInterval(tick);
        celebrate();
        // Opsional: ganti teks
        // countWrap.insertAdjacentHTML('afterend', '<p style="margin-top:8px"><b>Acara dimulai hari ini!</b></p>');
      }
      return;
    }

    const d = Math.floor(diff / (1000*60*60*24));
    diff -= d * (1000*60*60*24);
    const h = Math.floor(diff / (1000*60*60));
    diff -= h * (1000*60*60);
    const m = Math.floor(diff / (1000*60));
    diff -= m * (1000*60);
    const s = Math.floor(diff / 1000);

    elD.textContent = d;
    elH.textContent = h.toString().padStart(2,'0');
    elM.textContent = m.toString().padStart(2,'0');
    elS.textContent = s.toString().padStart(2,'0');
  }, 1000);

  // Efek konfeti manis
  function celebrate() {
    // ledakan awal
    confetti({ particleCount: 120, spread: 70, origin: { y: 0.6 } });
    // rentetan kiri-kanan 1.2 detik
    const duration = 1200;
    const end = Date.now() + duration;
    (function frame() {
      confetti({ startVelocity: 45, spread: 55, ticks: 120, origin: { x: 0.1, y: 0.7 } });
      confetti({ startVelocity: 45, spread: 55, ticks: 120, origin: { x: 0.9, y: 0.7 } });
      if (Date.now() < end) requestAnimationFrame(frame);
    })();
  }
</script>


<!-- ===== EVENTS ===== -->
<!-- ===== EVENTS: Resepsi → Akad → Lokasi (STACK/BLOCK) ===== -->
<section class="section event" data-bg="#fff8ec,#efe1c9">
  <div id="eventsStack">

    <!-- Akad -->
    <article class="e-card anim-card">
      <span class="badge"><i class="fa-solid fa-ring"></i> AKAD & TEMU</span>

      <div class="date-block">
        <div class="tag anim">Hari</div>
        <div class="day anim">Kamis</div>

        <div class="date-big anim">2</div>
        <div class="month anim">Oktober 2025</div>

        <div class="tag anim">Jam</div>
        <div class="time anim"><i class="fa-solid fa-clock"></i> 08.00 – 13.00 WIB</div>
      </div>

    

      <div class="actions anim">
 
        <a class="pill ripple" target="_blank"
           href="https://www.google.com/calendar/render?action=TEMPLATE&amp;text=Akad%20Ilham%20%26%20Sahitya&amp;dates=20251002T080000/20251002T100000&amp;ctz=Asia/Jakarta&amp;details=Akad%20Nikah%20Ilham%20%26%20Sahitya&amp;location=Jln%20Hoscokroaminoto%20Dusun%20Jeblog%20RT%201%20RW%202%20Desa%20Pehwetan%20Kec%20Papar%20Kab%20Kediri">
          <i class="fa-solid fa-calendar-plus"></i> Tambah ke Calendar
        </a>
      </div>
    </article>
    <!-- Resepsi -->
    <article class="e-card anim-card">
      <span class="badge"><i class="fa-solid fa-champagne-glasses"></i> RESEPSI</span>

      <div class="date-block">
        <div class="tag anim">Hari</div>
        <div class="day anim">Kamis</div>

        <div class="date-big anim">2</div>
        <div class="month anim">Oktober 2025</div>

        <div class="tag anim">Jam</div>
        <div class="time anim" style="font-style: italic;"><i class="fa-solid fa-clock"></i> Rileks </div>
      </div>


      <div class="actions anim">
    
        <a class="pill ripple" target="_blank"
           href="https://www.google.com/calendar/render?action=TEMPLATE&amp;text=Resepsi%20Ilham%20%26%20Sahitya&amp;dates=20251002T090000/20251002T130000&amp;ctz=Asia/Jakarta&amp;details=Resepsi%20pernikahan%20Ilham%20%26%20Sahitya&amp;location=Jln%20Hoscokroaminoto%20Dusun%20Jeblog%20RT%201%20RW%202%20Desa%20Pehwetan%20Kec%20Papar%20Kab%20Kediri">
          <i class="fa-solid fa-calendar-plus"></i> Tambah ke Calendar
        </a>
      </div>
    </article>


    <!-- Lokasi -->
    <article class="e-card anim-card">
      <span class="badge"><i class="fa-solid fa-location-dot"></i> LOKASI</span>

     <p class="place anim" style="margin-top:4px">
  <b>Kediaman Mempelai Wanita</b><br>
  Jln Hoscokroaminoto Dusun Jeblog RT 1 RW 2 Desa Pehwetan Kec Papar Kab Kediri
</p>

<div class="mapwrap anim anim-zoom">


  <iframe src="https://www.google.com/maps/embed?pb=!1m17!1m12!1m3!1d3953.5840686140186!2d112.08700947500441!3d-7.727694492290497!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zN8KwNDMnMzkuNyJTIDExMsKwMDUnMjIuNSJF!5e0!3m2!1sid!2sid!4v1758672573012!5m2!1sid!2sid" 
  width="100%"
    height="300"
    style="border:0;"
    allowfullscreen
    loading="lazy"
    referrerpolicy="no-referrer-when-downgrade"
  ></iframe>

</div>

<div class="actions anim">
  <a
    class="pill ripple"
    target="_blank"
    href="https://www.google.com/maps/search/?api=1&query=-7.751771,112.082105"
  >
    <i class="fa-solid fa-map-location-dot"></i> Buka di Google Map
  </a>
</div>

    </article>

  </div>
</section>

<style>
/* ===== Stack container (pure block) ===== */
#eventsStack{
  width:min(100% - 24px, 720px);
  margin:12px auto;
}

/* ===== Card (no flex/grid) ===== */
.e-card{
  position:relative; overflow:hidden;
  border-radius:18px;
  border:2px solid #b07a3f;                 /* coklat */
  background: linear-gradient(180deg,#fffdf8 0%, #f4e8d6 100%);
  box-shadow: 0 14px 28px rgba(0,0,0,.06);
  padding:12px 12px 14px;
  text-align:center;
  margin-bottom:12px;                        /* stack vertical */
}
.e-card .badge{
  display:inline-block;                      /* bukan flex */
  font-weight:700; letter-spacing:.2px;
  background:#fff; color:#6b4a2a; border:1px solid #b07a3f;
  padding:6px 10px; border-radius:999px;
  box-shadow:0 6px 14px rgba(176,122,63,.18);
}
.e-card .badge i{ margin-right:8px }         /* pengganti gap flex */
.e-card .place{ margin:10px 0 8px; line-height:1.5 }

/* ===== Date block (stack) ===== */
.date-block{ display:block; margin:10px 0 6px }
.date-block .tag{
  display:inline-block;
  font-size:12px; line-height:1; opacity:.75;
  padding:6px 10px; border-radius:999px; background:#fff; border:1px solid rgba(176,122,63,.55);
  margin:4px 0;
}
.date-block .day{
  font-family:'Playfair Display',serif; font-size:18px; margin:2px 0 6px;
}
.date-block .date-big{
  font-family:'Playfair Display',serif; font-size:64px; line-height:.85;
  color:#b07a3f; text-shadow: 0 1px 0 #fff, 0 0 8px rgba(255,255,255,.5);
  margin:2px 0;
}
.date-block .month{
  font-weight:600; margin:2px 0 8px;
}
.date-block .time{
  font-weight:700; margin:2px 0;
}

/* ===== Map ===== */
.mapwrap{ position:relative; overflow:hidden; border-radius:12px; border:1px solid rgba(176,122,63,.4) }
.mapwrap iframe{ display:block; width:100%; height:220px; border:0 }

/* ===== Buttons (block, no flex) ===== */
.actions{ display:block; margin-top:8px }
.pill{
  display:block;                              /* block supaya center pakai margin auto */
  width:100%; max-width:320px;
  margin:8px auto 0;
  padding:10px 14px;
  border-radius:999px; border:1px solid #b07a3f;
  color:#6a4a2a; background:#fff; text-decoration:none; font-weight:700;
  box-shadow:0 6px 14px rgba(176,122,63,.18);
  transition: transform .2s, background .2s, box-shadow .2s;
}
.pill i{ margin-right:8px }
.pill:hover{ transform: translateY(-1px) scale(1.03); background:#fffaf3 }
.pill:active{ transform: scale(.97) }

/* ===== Animations (halus) ===== */
.anim-card{
  opacity:0; transform: translateY(18px) scale(.985) rotateX(6deg);
  transform-origin: center top;
  filter: blur(3px);
  transition: transform .7s cubic-bezier(.22,.61,.36,1), opacity .7s, filter .7s;
}
.anim-card.show{
  opacity:1; transform: translateY(0) scale(1) rotateX(0);
  filter:none;
}
.e-card .anim{
  opacity:0; transform: translateY(12px); filter: blur(2px);
  transition: transform .6s cubic-bezier(.22,.61,.36,1), opacity .6s, filter .6s;
}
.e-card .anim.show{ opacity:1; transform:none; filter:none }

/* Map zoom subtle */
.e-card .anim-zoom{ transform: translateY(12px) scale(.98) }
.e-card .anim-zoom.show{ transform: none }

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .anim-card,.e-card .anim,.e-card .anim-zoom{ transition:none !important; transform:none !important; filter:none !important; opacity:1 !important; }
}
</style>

<script>
/* ===== Reveal animasi stack (tanpa flex/grid) ===== */
(function(){
  const wrap = document.getElementById('eventsStack');
  if(!wrap) return;

  const cards = Array.prototype.slice.call(wrap.querySelectorAll('.anim-card'));

  const io = new IntersectionObserver((entries)=>{
    entries.forEach(entry=>{
      const card = entry.target;
      if(entry.isIntersecting){
        card.classList.add('show');

        // Stagger isi card setelah card tampil
        const inner = Array.prototype.slice.call(card.querySelectorAll('.anim'));
        inner.forEach((el, i)=>{
          el.style.transitionDelay = (150 + i*90) + 'ms';
          requestAnimationFrame(()=> el.classList.add('show'));
        });
      }else{
        card.classList.remove('show');
        const inner = card.querySelectorAll('.anim');
        inner.forEach(el=> el.classList.remove('show'));
      }
    });
  }, { threshold:.2, rootMargin:'0px 0px -10% 0px' });

  // Delay antar-card (res/akad/lokasi)
  cards.forEach((card, idx)=>{
    card.style.transitionDelay = (idx*160) + 'ms';
    io.observe(card);
  });
})();
</script>


<!-- ===== GALLERY ===== -->
<!-- ====== GALLERY + LIGHTBOX (FULLCODE: HTML + CSS + JS) ====== -->
<section class="section" data-bg="#fffdf7,#f2e6d6">
  <div class="center" style="margin-bottom:10px">
    <i class="fa-solid fa-images" style="font-size:26px;color:#b07a3f"></i>
    <h3 style="margin:6px 0 0;font-family:'Playfair Display',serif">Our Gallery</h3>
  </div>

  <div class="gallery" id="gal">
    <!-- EDIT FOTO -->
    <img src="assets/images/slide1.jpg" alt="" loading="lazy">
    <img src="assets/images/slide2.jpg" alt="" loading="lazy">
    <img src="assets/images/slide3.jpg" alt="" loading="lazy">
    <img src="assets/images/slide4.jpg" alt="" loading="lazy">
    <img src="assets/images/slide5.jpg" alt="" loading="lazy">
    <img src="assets/images/slide6.jpg" alt="" loading="lazy">
      <img src="assets/images/slide7.jpg" alt="" loading="lazy">
    <img src="assets/images/slide8.jpg" alt="" loading="lazy">
  </div>
</section>

<!-- Lightbox -->
<div class="lb" id="lb2" aria-hidden="true">
  <div class="stage" id="stage">
    <button class="nav prev" id="prev" type="button" aria-label="Previous"><i class="fa-solid fa-angle-left"></i></button>
    <button class="nav next" id="next" type="button" aria-label="Next"><i class="fa-solid fa-angle-right"></i></button>
    <button class="close" id="close" type="button" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
  </div>
</div>

<style>
  /* ===== GRID & TILE ===== */
  .gallery{
    position:relative; z-index:2;
    display:grid; grid-template-columns:repeat(2,1fr); gap:10px;
  }
  @media (min-width:540px){
    .gallery{ grid-template-columns:repeat(3,1fr); gap:12px; }
  }
  .gallery img{
    width:100%; aspect-ratio:3/4; object-fit:cover;
    border-radius:12px;
    border:2px solid #b07a3f;                 /* border coklat */
    cursor:pointer; user-select:none; -webkit-user-drag:none;

    /* state awal (sebelum terlihat) */
    opacity:0; transform:translateY(16px) scale(.985); filter:blur(2px);
    transition: box-shadow .25s, filter .25s; /* transform/opacity via keyframes */
    will-change: transform, opacity, filter;
  }

  /* Hover/tap feel */
  .gallery img:hover,
  .gallery img:focus-visible{
    transform:translateY(-3px) scale(1.05) !important;
    box-shadow:0 14px 28px rgba(0,0,0,.18);
    filter:saturate(1.06);
    outline:none;
  }
  .gallery img:active{ transform:scale(.98) !important }

  /* Animasi masuk sesuai arah scroll */
  @keyframes revealUp{
    from{opacity:0;transform:translateY(18px) scale(.985);filter:blur(2px)}
    to  {opacity:1;transform:translateY(0)    scale(1);   filter:blur(0)}
  }
  @keyframes revealDown{
    from{opacity:0;transform:translateY(-18px) scale(.985);filter:blur(2px)}
    to  {opacity:1;transform:translateY(0)     scale(1);   filter:blur(0)}
  }
  .gallery img.in-up{
    animation:revealUp .6s cubic-bezier(.22,.61,.36,1) var(--delay,0ms) both;
  }
  .gallery img.in-down{
    animation:revealDown .6s cubic-bezier(.22,.61,.36,1) var(--delay,0ms) both;
  }

  /* ===== LIGHTBOX ===== */
  .lb{
    position:fixed; inset:0; z-index:9999;
    background: rgba(0,0,0,.55);
    backdrop-filter: blur(2px);
    opacity:0; pointer-events:none;
    transition: opacity .28s ease;
  }
  .lb.open{ opacity:1; pointer-events:auto; }

  .stage{
    position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
    padding:18px;
  }
  .stage img{
    max-width:92vw; max-height:86vh; border-radius:14px;
    box-shadow:0 20px 60px rgba(0,0,0,.45);
    transform:scale(.96); opacity:0; transition:transform .28s ease, opacity .28s ease;
    user-select:none; -webkit-user-drag:none;
  }
  .lb.open .stage img{ transform:scale(1); opacity:1; }

  /* Buttons */
  .lb .nav, .lb .close{
    position:absolute; display:grid; place-items:center;
    width:42px; height:42px; border-radius:999px;
    background: rgba(255,255,255,.9);
    box-shadow:0 6px 16px rgba(0,0,0,.25);
    border:none; cursor:pointer;
    transition: transform .18s ease, background .18s ease;
  }
  .lb .nav:hover, .lb .close:hover{ transform:scale(1.06); background:#fff; }
  .lb .nav:active, .lb .close:active{ transform:scale(.96); }
  .lb .nav i, .lb .close i{ font-size:18px; color:#333; pointer-events:none; }

  .lb .prev{ left:12px; top:50%; transform:translateY(-50%); }
  .lb .next{ right:12px; top:50%; transform:translateY(-50%); }
  .lb .close{ right:12px; top:12px; }

  /* body lock saat LB aktif */
  body.noscroll{ overflow:hidden; }

  @media (prefers-reduced-motion:reduce){
    .gallery img{ transition:none; animation:none; opacity:1; transform:none; filter:none }
    .lb, .stage img{ transition:none }
  }
</style>

<script>
(()=> {
  /* ---------- LIGHTBOX ---------- */
  const gal     = document.getElementById('gal');
  const lb      = document.getElementById('lb2');
  const stage   = document.getElementById('stage');
  const btnPrev = document.getElementById('prev');
  const btnNext = document.getElementById('next');
  const btnClose= document.getElementById('close');
  if(!gal || !lb || !stage) return;

  const thumbs = [...gal.querySelectorAll('img')];
  let cur = -1, imgEl = null;

  function openAt(i){
    if(i < 0) i = thumbs.length - 1;
    if(i >= thumbs.length) i = 0;
    cur = i;

    if(!imgEl){
      imgEl = document.createElement('img');
      imgEl.draggable = false;
      stage.appendChild(imgEl);
    }
    imgEl.src = thumbs[cur].src;

    lb.classList.add('open');
    lb.setAttribute('aria-hidden', 'false');
    document.body.classList.add('noscroll');
  }
  function closeLb(){
    lb.classList.remove('open');
    lb.setAttribute('aria-hidden', 'true');
    document.body.classList.remove('noscroll');
  }
  function showPrev(){ openAt(cur - 1); }
  function showNext(){ openAt(cur + 1); }

  thumbs.forEach((t,i)=> t.addEventListener('click', ()=> openAt(i)));
  btnPrev.addEventListener('click', e => { e.stopPropagation(); showPrev(); });
  btnNext.addEventListener('click', e => { e.stopPropagation(); showNext(); });
  btnClose.addEventListener('click',e => { e.stopPropagation(); closeLb(); });

  // klik area gelap = close
  lb.addEventListener('click', e => { if(e.target === lb) closeLb(); });

  // keyboard
  document.addEventListener('keydown', e => {
    if(!lb.classList.contains('open')) return;
    if(e.key === 'Escape') closeLb();
    if(e.key === 'ArrowLeft') showPrev();
    if(e.key === 'ArrowRight') showNext();
  });

  // swipe mobile
  let sx = 0;
  lb.addEventListener('touchstart', e => sx = e.touches[0].clientX, {passive:true});
  lb.addEventListener('touchend',   e => {
    const dx = e.changedTouches[0].clientX - sx;
    if(Math.abs(dx) > 40) (dx > 0 ? showPrev() : showNext());
  }, {passive:true});

  /* ---------- SCROLL-DIRECTION REVEAL ---------- */
  let lastY = window.scrollY, direction = 'down';
  window.addEventListener('scroll', () => {
    const y = window.scrollY;
    direction = (y > lastY) ? 'down' : 'up';
    lastY = y;
  }, {passive:true});

  // Observer: re-trigger saat masuk/keluar viewport
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(entry=>{
      const el = entry.target;
      if(entry.isIntersecting){
        if(!el.dataset.i){ el.dataset.i = [...el.parentNode.children].indexOf(el); }
        el.style.setProperty('--delay', (parseInt(el.dataset.i,10) * 70) + 'ms');
        el.classList.remove('in-up','in-down'); // reset
        void el.offsetWidth;                    // reflow
        el.classList.add(direction === 'down' ? 'in-up' : 'in-down');
      }else{
        el.classList.remove('in-up','in-down');
        el.style.opacity = 0;
        el.style.transform = 'translateY(16px) scale(.985)';
        el.style.filter = 'blur(2px)';
      }
    });
  }, { threshold:.25, rootMargin:'0px 0px -10% 0px' });

  thumbs.forEach((img,i)=>{ img.dataset.i=i; io.observe(img); });
})();
</script>


<section class="section" data-bg="#fff8ec,#efe1c9">
  <div class="card reveal wg-card" id="wgift">
    <div class="center">
      <i class="fa-solid fa-gift wg-anim wg-pop" style="font-size:28px;color:#b07a3f"></i>
      <h3 class="wg-anim wg-up" style="margin:8px 0 0;font-family:'Playfair Display',serif">Wedding Gift</h3>
    </div>

    <p class="center wg-anim wg-fade" style="margin:8px 0 14px">
      Doa restu Anda sangat berarti. Bila ingin berbagi hadiah, data berikut kami sediakan:
    </p>

    <div class="copyrow">
      <div class="bank wg-anim">
        <div class="meta">
          <b>BNI</b><br>No. Rekening: <b id="rek1">1852855245</b><br>a.n <b>Sahitya Nashiroh</b>
        </div>
        <button class="btn-mini ripple" onclick="copyText('rek1')"><i class="fa-solid fa-copy"></i> Copy</button>
      </div>
      <div class="bank wg-anim">
        <div class="meta">
          <b>Bank Jatim</b><br>No. Rekening: <b id="rek2">1932043641</b><br>a.n <b>Ilham Permana Putra</b>
        </div>
        <button class="btn-mini ripple" onclick="copyText('rek2')"><i class="fa-solid fa-copy"></i> Copy</button>
      </div>
      <!-- <button class="btn-mini ripple" id="qrisBtn"><i class="fa-solid fa-qrcode"></i> Tampilkan QRIS</button> -->
    </div>
  </div>
</section>

<style>
  /* ===== Card styling (border coklat + lembut) ===== */
  .wg-card{
    position:relative; overflow:hidden;
    border:2px solid #b07a3f; border-radius:18px;
    box-shadow:0 12px 28px rgba(0,0,0,.06);
    background: linear-gradient(180deg,#fff8ec 0%, #f4e8d6 100%);
  }

  /* ===== Grid copy row ===== */
  .copyrow{display:grid; gap:10px}
  @media (min-width:560px){ .copyrow{ grid-template-columns:1fr 1fr; gap:12px } }

  /* ===== Bank card ===== */
  .bank{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:10px 12px; border-radius:14px;
    border:2px solid rgba(176,122,63,.65); /* coklat */
    background: #fffdf8;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.6);
    transform: translateY(14px) scale(.985); opacity:0; filter:blur(2px);
    transition: transform .45s cubic-bezier(.22,.61,.36,1), opacity .45s, filter .45s, box-shadow .25s;
  }
  .bank:hover{ transform: translateY(-3px) scale(1.02); box-shadow:0 10px 22px rgba(0,0,0,.08) }
  .bank:active{ transform: scale(.985) }

  .bank .meta{ line-height:1.45 }
  .btn-mini{
    display:inline-flex; align-items:center; gap:6px;
    padding:8px 10px; border-radius:999px; border:1px solid #b07a3f;
    background:#fff; color:#7a5632; font-weight:600; cursor:pointer;
    box-shadow: 0 4px 10px rgba(176,122,63,.18);
    transition: transform .2s, box-shadow .2s, background .2s;
  }
  .btn-mini:hover{ transform: translateY(-1px) scale(1.03); background:#fffaf3 }
  .btn-mini:active{ transform: scale(.96) }

  /* ===== Anim base ===== */
  #wgift .wg-anim{ opacity:0; filter:blur(2px); transform: translateY(14px); transition: transform .6s cubic-bezier(.22,.61,.36,1), opacity .6s, filter .6s }
  #wgift .wg-anim.show{ opacity:1; filter:none; transform:none }

  /* Icon pop */
  #wgift .wg-pop{ transform: translateY(-10px) scale(.85) rotate(-8deg) }
  #wgift .wg-pop.show{ animation: wgWob 6s ease-in-out 1.1s infinite }
  @keyframes wgWob{ 0%,100%{transform: none} 50%{transform: translateY(-2px) scale(1.02)} }

  /* Heading slide-up (sudah by default) */
  /* Paragraph fade (sudah by default) */

  /* ===== Scroll direction aware untuk .bank (selang-seling dari kiri/kanan) ===== */
  .bank.__in-up:nth-child(odd){ animation: wgInLeft .55s cubic-bezier(.22,.61,.36,1) var(--d,0ms) both }
  .bank.__in-up:nth-child(even){ animation: wgInRight .55s cubic-bezier(.22,.61,.36,1) var(--d,0ms) both }
  .bank.__in-down:nth-child(odd){ animation: wgInRight .55s cubic-bezier(.22,.61,.36,1) var(--d,0ms) both }
  .bank.__in-down:nth-child(even){ animation: wgInLeft .55s cubic-bezier(.22,.61,.36,1) var(--d,0ms) both }

  @keyframes wgInLeft{
    from{opacity:0; transform:translateX(-18px) scale(.985); filter:blur(2px)}
    to  {opacity:1; transform:none; filter:none}
  }
  @keyframes wgInRight{
    from{opacity:0; transform:translateX(18px) scale(.985); filter:blur(2px)}
    to  {opacity:1; transform:none; filter:none}
  }

  /* ===== Toast copy ===== */
  .wg-toast{
    position:fixed; left:50%; bottom:18px; transform:translateX(-50%) translateY(20px);
    background:#2e2a25; color:#fff; padding:10px 14px; border-radius:12px;
    box-shadow:0 10px 24px rgba(0,0,0,.25);
    font-size:14px; opacity:0; z-index:99999;
    transition:transform .25s ease, opacity .25s ease;
  }
  .wg-toast.show{ opacity:1; transform:translateX(-50%) translateY(0) }
  @media (prefers-reduced-motion:reduce){
    #wgift .wg-anim, .bank{ transition:none; animation:none; opacity:1; transform:none; filter:none }
  }

  /* Biar teks kebaca: putih tipis */
  #wgift h3, #wgift p, #wgift .bank b{
    text-shadow: 0 1px 0 rgba(255,255,255,.9), 0 0 6px rgba(255,255,255,.45);
  }
</style>

<script>
  // --- Copy util + toast ---
  function copyText(id){
    try{
      const txt = (document.getElementById(id)?.innerText || '').trim();
      if(!txt) return;
      navigator.clipboard.writeText(txt);
      showWgToast('Nomor rekening disalin');
    }catch(e){ showWgToast('Gagal menyalin'); }
  }
  function showWgToast(msg){
    let t = document.querySelector('.wg-toast');
    if(!t){
      t = document.createElement('div'); t.className = 'wg-toast'; document.body.appendChild(t);
    }
    t.textContent = msg;
    requestAnimationFrame(()=>{ t.classList.add('show'); });
    clearTimeout(window.__wgToastT);
    window.__wgToastT = setTimeout(()=> t.classList.remove('show'), 1800);
  }

  // --- Reveal per objek (stagger + arah scroll untuk .bank) ---
  (function(){
    const card = document.getElementById('wgift'); if(!card) return;

    const items = [
      ...card.querySelectorAll('.wg-pop, .wg-up, .wg-fade'),
    ];
    // Set delay global untuk header parts
    items.forEach((el,i)=> el.style.transitionDelay = (i*100)+'ms');

    let lastY = window.scrollY, dir = 'down';
    window.addEventListener('scroll', ()=>{
      const y = window.scrollY; dir = (y > lastY) ? 'down' : 'up'; lastY = y;
    }, {passive:true});

    // Observer untuk header (icon, judul, paragraf)
    const ioHead = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){ e.target.classList.add('show'); }
        else{ e.target.classList.remove('show'); }
      });
    }, { threshold: .2, rootMargin: '0px 0px -10% 0px' });
    items.forEach(el=> ioHead.observe(el));

    // Observer untuk bank (arah scroll + stagger)
    const banks = [...card.querySelectorAll('.bank')];
    const ioBank = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        const el = e.target;
        if(e.isIntersecting){
          el.style.setProperty('--d', (banks.indexOf(el)*90)+'ms');
          el.classList.remove('__in-up','__in-down');
          // Force reflow supaya anim ulang
          void el.offsetWidth;
          el.classList.add(dir === 'down' ? '__in-up' : '__in-down');
        }else{
          el.classList.remove('__in-up','__in-down');
          el.style.opacity = 0; el.style.transform = 'translateY(14px) scale(.985)'; el.style.filter = 'blur(2px)';
        }
      });
    }, { threshold: .2, rootMargin: '0px 0px -10% 0px' });
    banks.forEach(el=> ioBank.observe(el));
  })();
</script>



<!-- ===== WISHES ===== -->
<!-- ===================== WISHES (SELF-CONTAINED) ===================== -->

<style>
  .reveal{opacity:0; transform:translateY(14px); filter:blur(2px);
    transition:transform .6s cubic-bezier(.22,.61,.36,1), opacity .6s, filter .6s}
  .reveal.on{opacity:1; transform:none; filter:none}
</style>

<!-- ====== STYLE (scoped) ====== -->
<style>
  .wishes-sec{ --cream:#fffdf7; --cream2:#f2e6d6; --brown:#b07a3f; --text:#3a332a;
    padding:18px 16px 28px; max-width:760px; margin:0 auto; color:var(--text)}
  .wishes-sec .ws-head{ text-align:center; margin-bottom:8px }
  .wishes-sec .ws-head i{ color:var(--brown); font-size:24px }
  .wishes-sec .ws-head h3{ margin:6px 0 2px; font-family:"Playfair Display",serif }
  .wishes-sec .ws-sub{ opacity:.75 }

  .wishes-sec .ws-card{ background:#fffefb; border:2px solid var(--brown);
    border-radius:14px; box-shadow:0 8px 18px rgba(0,0,0,.06), inset 0 0 0 1px rgba(255,255,255,.6);
    padding:14px 14px 16px }

  .wishes-sec .ws-stats{ display:flex; gap:10px; justify-content:center; margin-bottom:8px }
  .wishes-sec .badge-in{ display:inline-block; border:2px solid var(--brown); border-radius:999px;
    padding:6px 12px; font-size:14px; background:#fffefb }
  .wishes-sec .badge-in.in{ background:#eaf7ef; border-color:#74b082 }
  .wishes-sec .badge-in.out{ background:#fef0f0; border-color:#e8a6a6 }

  .wishes-sec .ws-form{ display:grid; gap:10px; margin-top:8px }
  .wishes-sec .ws-form input,
  .wishes-sec .ws-form textarea,
  .wishes-sec .ws-form select{
    padding:12px; border:2px solid #d9c5a6; border-radius:10px; background:#fff; font-size:15px
  }
  .wishes-sec .ws-form textarea{ resize:vertical }
  .wishes-sec .ws-form button{ border:none; background:var(--brown); color:#fff;
    border-radius:12px; padding:12px 14px; font-weight:600; cursor:pointer }
  .wishes-sec .ws-form button:active{ transform:scale(.98) }

  /* LIST */
  .wishes-sec .ws-list{ position:relative; max-height:260px; overflow-y:auto; overflow-x:hidden;
    -webkit-overflow-scrolling:touch; scroll-behavior:auto; padding-bottom:4px;
    scrollbar-width:none; -ms-overflow-style:none }
  .wishes-sec .ws-list::-webkit-scrollbar{ width:0; height:0 }

  .wishes-sec .ws-list .card{ margin:8px 0; background:#fffefb; border:2px solid var(--brown);
    border-radius:12px; padding:10px 12px; box-shadow:0 8px 18px rgba(0,0,0,.05), inset 0 0 0 1px rgba(255,255,255,.6);
    transform:translateZ(0) scale(1); transition:transform .18s cubic-bezier(.22,.61,.36,1), box-shadow .2s, filter .2s }
  .wishes-sec .ws-list .card:hover{ transform:scale(1.012); box-shadow:0 12px 26px rgba(0,0,0,.10); filter:saturate(1.03) }
  .wishes-sec .ws-list .card:active{ transform:scale(.992) }
  .wishes-sec .ws-list b, .wishes-sec .ws-list p, .wishes-sec .ws-list small{
    text-shadow:0 1px 0 rgba(255,255,255,.9), 0 0 6px rgba(255,255,255,.35) }

  /* Fade lembut */
  .wishes-sec .ws-list::before, .wishes-sec .ws-list::after{
    content:""; position:sticky; left:0; right:0; z-index:2; pointer-events:none; display:block; height:16px }
  .wishes-sec .ws-list::before{ top:-1; background:linear-gradient(#fff0, var(--cream)) }
  .wishes-sec .ws-list::after{ bottom:-1; background:linear-gradient(var(--cream2), #0000) }

  /* LOG PANEL */
  .wishes-sec .ws-log{ margin-top:10px; }
  .wishes-sec #wsLogPre{ max-height:160px; overflow:auto; background:#111; color:#d9f7d9; padding:10px;
    border-radius:8px; font:12px/1.45 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace }
</style>


<!-- ===== WISHES (HTML) ===== -->
<section class="section" id="wishesSection">
  <div class="card" style="background:#fffefb;border:2px solid #b07a3f;border-radius:14px;padding:14px;box-shadow:0 8px 18px rgba(0,0,0,.06), inset 0 0 0 1px rgba(255,255,255,.6)">
    <div class="center" style="display:flex;gap:10px;justify-content:center;margin-bottom:8px">
      <div class="badge-in in" style="border:2px solid #74b082;border-radius:999px;padding:6px 12px;background:#eaf7ef">
        <b id="hadirC">0</b> Hadir
      </div>
      <div class="badge-in out" style="border:2px solid #e8a6a6;border-radius:999px;padding:6px 12px;background:#fef0f0">
        <b id="absenC">0</b> Tidak Hadir
      </div>
    </div>

    <form id="wishForm" class="form" autocomplete="off" style="display:grid;gap:10px;margin-top:8px">
      <input id="nama" placeholder="Nama" required style="padding:12px;border:2px solid #d9c5a6;border-radius:10px;background:#fff" />
      <textarea id="ucapan" rows="3" placeholder="Ucapan" required style="padding:12px;border:2px solid #d9c5a6;border-radius:10px;background:#fff"></textarea>
      <select id="konfirmasi" required style="padding:12px;border:2px solid #d9c5a6;border-radius:10px;background:#fff">
        <option value="" disabled selected>Konfirmasi Kehadiran</option>
        <option>Hadir</option>
        <option>Tidak Hadir</option>
      </select>
      <button type="submit" style="border:none;background:#b07a3f;color:#fff;border-radius:12px;padding:12px 14px;font-weight:600;cursor:pointer">
        <i class="fa-solid fa-paper-plane"></i> Kirim
      </button>
    </form>

    <div id="wishList" style="max-height:260px;overflow:auto;margin-top:10px;scroll-behavior:auto; scrollbar-width:none"></div>
  </div>
</section>

<!-- ===== WISHES (SCRIPT) — taruh SETELAH blok HTML di atas ===== -->
<script>
(function(){
  const API_URL = 'https://rsudslg.kedirikab.go.id/api/wishes.php';

  // Ambil elemen2 (ID WAJIB)
  const form = document.getElementById('wishForm');
  const list = document.getElementById('wishList');
  const elHadir = document.getElementById('hadirC');
  const elAbsen = document.getElementById('absenC');
  const inputNama = document.getElementById('nama');
  const inputUcapan = document.getElementById('ucapan');
  const selectKonf = document.getElementById('konfirmasi');

  if (!form || !list || !elHadir || !elAbsen || !inputNama || !inputUcapan || !selectKonf) {
    console.error('Wishes: form atau list tidak ketemu. Pastikan #wishForm & #wishList ada.');
    return;
  }

  const esc = s => String(s ?? '').replace(/[&<>"']/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;', "'":'&#39;' }[m]));

  function render(item, prepend=true){
    const div = document.createElement('div');
    div.className = 'card';
    div.style.cssText = 'margin:8px 0;border:2px solid #b07a3f;border-radius:12px;padding:10px 12px;background:#fffefb;box-shadow:0 8px 18px rgba(0,0,0,.05), inset 0 0 0 1px rgba(255,255,255,.6)';
    const when = item.created_at || Date.now();
    div.innerHTML = `
      <b>${esc(item.name)}</b> <small style="opacity:.7">• ${new Date(when).toLocaleString('id-ID')}</small>
      <p style="margin:.4rem 0 0;white-space:pre-wrap">${esc(item.message)}</p>
      <span class="badge-in ${item.status==='Hadir'?'in':'out'}" style="display:inline-block;border:2px solid #b07a3f;border-radius:999px;padding:2px 8px;background:#fffefb">${esc(item.status)}</span>
    `;
    prepend ? list.prepend(div) : list.append(div);
  }

  function recount(items){
    let h=0,a=0; items.forEach(x => x.status==='Hadir'?h++:a++);
    elHadir.textContent = String(h);
    elAbsen.textContent = String(a);
  }

  async function apiGet(){
    const r = await fetch(API_URL + '?limit=100', { mode:'cors', cache:'no-store' });
    if (!r.ok) throw new Error('GET_'+r.status);
    return r.json();
  }

  async function apiPost(payload){
    const r = await fetch(API_URL, {
      method:'POST',
      mode:'cors',
      headers:{ 'Content-Type':'application/json' },
      body: JSON.stringify(payload)
    });
    if (!r.ok) throw new Error('POST_'+r.status);
    return r.json();
  }

  // Load awal
  (async()=>{
    try{
      const data = await apiGet();
      for (let i=data.length-1; i>=0; i--) render(data[i], true); // terbaru di atas
      recount(data);
    }catch(e){
      console.error('Wishes init:', e);
      alert('Gagal memuat wishes. Cek CORS & buka via http(s)://, bukan file://');
    }
  })();

  // Submit
  form.addEventListener('submit', async (e)=>{
    e.preventDefault();
    const n = inputNama.value.trim();
    const u = inputUcapan.value.trim();
    const k = selectKonf.value;
    if (!n || !u || !k) return;
    try{
      const saved = await apiPost({ name:n, message:u, status:k });
      render(saved, true);
      if (saved.status === 'Hadir') {
        elHadir.textContent = String((+elHadir.textContent || 0) + 1);
      } else {
        elAbsen.textContent = String((+elAbsen.textContent || 0) + 1);
      }
      list.scrollTo({ top:0, behavior:'smooth' });
      form.reset();
    }catch(e2){
      console.error('Wishes submit:', e2);
      alert('Kirim gagal.');
    }
  });
})();
</script>



<!-- ===== FOOTER ===== -->
<footer class="section center" data-bg="#fff6e6,#f0e1c8">
  <div class="particles" aria-hidden="true"></div>
  <h3 class="reveal">Terima Kasih</h3>
  <p class="reveal" style="margin:6px 0 0">Kami yang berbahagia, <b>Ilham & Sahitya</b></p>
  <small class="reveal" style="opacity:.75">Designed with <i class="fa-solid fa-heart" style="color:#b07a3f"></i></small>
</footer>

</main>

<script>
/* ===== HEX -> RGB helper ===== */
function hexToRgbArray(hex){
  const m = hex.trim().replace('#','');
  const n = m.length===3 ? m.split('').map(x=>x+x).join('') : m;
  const int = parseInt(n,16);
  return [(int>>16)&255,(int>>8)&255,int&255];
}
function lerp(a,b,t){return a+(b-a)*t}
function mixRGB(a,b,t){return [lerp(a[0],b[0],t),lerp(a[1],b[1],t),lerp(a[2],b[2],t)]}

/* ===== BG blend per section (lebih terang) ===== */
const bgEl=document.getElementById('bg');
let currentC1=[250,246,238], currentC2=[241,229,211];
function setBG(c1,c2,dur=700){
  const start=performance.now(), s1=[...currentC1], s2=[...currentC2];
  function step(now){
    const t=Math.min(1,(now-start)/dur);
    const m1=mixRGB(s1,c1,t), m2=mixRGB(s2,c2,t);
    document.documentElement.style.setProperty('--c1', m1.map(x=>x.toFixed(2)).join(','));
    document.documentElement.style.setProperty('--c2', m2.map(x=>x.toFixed(2)).join(','));
    if(t<1) requestAnimationFrame(step); else {currentC1=c1; currentC2=c2;}
  }
  requestAnimationFrame(step);
}
const sections=[...document.querySelectorAll('[data-bg]')];
const obs=new IntersectionObserver((ents)=>{
  ents.forEach(e=>{
    if(e.isIntersecting){
      const [h1,h2]=e.target.getAttribute('data-bg').split(',');
      setBG(hexToRgbArray(h1), hexToRgbArray(h2), 800);
    }
  })
},{rootMargin:"-35% 0px -55% 0px",threshold:.01});
sections.forEach(s=>obs.observe(s));

/* ===== gradient focus follows pointer ===== */
addEventListener('pointermove',e=>{
  const x=(e.clientX/innerWidth)*100, y=(e.clientY/innerHeight)*100;
  document.documentElement.style.setProperty('--gx', x+'%');
  document.documentElement.style.setProperty('--gy', y+'%');
});

/* ===== Gate + music ===== */
const bgm=document.getElementById('bgm'), gate=document.getElementById('gate');
document.getElementById('openBtn').onclick=(ev)=>{
  gate.style.transition='opacity .6s ease, visibility 0s .6s';
  gate.style.opacity=0; gate.style.visibility='hidden';
  bgm.play().catch(()=>{});
};
const musicBtn=document.getElementById('musicBtn'); let playing=false;
function syncMusicBtn(){ musicBtn.innerHTML = playing ? '<i class="fa-solid fa-volume-high"></i>' : '<i class="fa-solid fa-music"></i>'; }
musicBtn.addEventListener('click',()=>{ playing?bgm.pause():bgm.play().catch(()=>{}); });
bgm.addEventListener('play',()=>{playing=true;syncMusicBtn()});
bgm.addEventListener('pause',()=>{playing=false;syncMusicBtn()});

/* ===== magnetic hover ===== */
document.querySelectorAll('.mag').forEach(el=>{
  el.addEventListener('pointermove',e=>{
    const r=el.getBoundingClientRect(), dx=(e.clientX-(r.left+r.width/2))/r.width, dy=(e.clientY-(r.top+r.height/2))/r.height;
    el.style.transform=`translate(${dx*6}px,${dy*6}px)`;
  });
  el.addEventListener('pointerleave',()=>el.style.transform='translate(0,0)');
});

/* ===== hero slider + tilt ===== */
const slides=[...document.querySelectorAll('.slide')]; let si=0;
setInterval(()=>{slides[si].classList.remove('active'); si=(si+1)%slides.length; slides[si].classList.add('active')}, 3600);
const slider=document.getElementById('slider');
function setTilt(x=0,y=0){ slider.style.setProperty('--tx',x); slider.style.setProperty('--ty',-y); }
addEventListener('deviceorientation', e=>{ const x=(e.gamma||0)/8, y=(e.beta||0)/12; setTilt(x,y) }, {passive:true});
slider.addEventListener('pointermove', e=>{ const r=slider.getBoundingClientRect(); const x=((e.clientX-r.left)/r.width-.5)*6; const y=((e.clientY-r.top)/r.height-.5)*6; setTilt(x,y) });
slider.addEventListener('pointerleave', ()=>setTilt(0,0));



/* ===== wishes local + auto-scroll ===== */


/* ===== Reveal on scroll ===== */
const revs=[...document.querySelectorAll('.reveal')];
revs.forEach(el=>{if(!el.dataset.variant){el.dataset.variant=Math.random()>.5?'L':'R';}});
const io=new IntersectionObserver(es=>es.forEach(e=>{if(e.isIntersecting){e.target.classList.add('on'); io.unobserve(e.target)}}),{threshold:.2});
revs.forEach(x=>io.observe(x));

/* ===== Footer petals ===== */
(function spawnParticles(){
  const host=document.querySelector('footer .particles'); if(!host) return;
  for(let i=0;i<16;i++){const s=document.createElement('span');
    s.style.left=Math.random()*100+'%';
    s.style.animationDelay=(Math.random()*8)+'s';
    s.style.animationDuration=(10+Math.random()*10)+'s';
    host.appendChild(s);
  }
})();

/* ===== pointer ripple helper (for .ripple) ===== */
document.body.addEventListener('click',function(e){
  const t=e.target.closest('.ripple'); if(!t) return;
  const r=t.getBoundingClientRect(), x=e.clientX-r.left, y=e.clientY-r.top;
  const el=document.createElement('i'); el.style.cssText='position:absolute;left:'+x+'px;top:'+y+'px;width:0;height:0;border-radius:50%;background:rgba(255,255,255,.4);transform:translate(-50%,-50%);animation:rip .6s ease-out forwards;pointer-events:none';
  t.appendChild(el); setTimeout(()=>el.remove(),650);
},{capture:true});
</script>
</body>
</html>
