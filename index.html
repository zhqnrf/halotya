<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<title>Ilham & Sahitya — Wedding Invite</title>
<meta name="theme-color" content="#d3b07b"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@600;700;800&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet"/>

<style>
/* =================== TOKENS (light palette) =================== */
:root{
  --c1: 250,246,238; /* base light */
  --c2: 241,229,211; /* warm */
  --accent:#b07a3f;  /* gold-brown */
  --accent2:#7b5530;
  --ink:#2b251f;
  --paper:#fffdf7;
  --line:#eadfcb;
  --gx:50%; --gy:50%;
}
*{box-sizing:border-box; -webkit-tap-highlight-color: transparent}
html,body{margin:0;height:100%;background:rgb(250,246,238);color:var(--ink);font-family:Poppins,system-ui,Segoe UI,Roboto,Arial,sans-serif}
main{max-width:640px;margin:0 auto;position:relative}

/* =================== FIXED BACKGROUND (lebih terang) =================== */
.bg{position:fixed;inset:0;z-index:-3;pointer-events:none;
  background:
    radial-gradient(120vw 120vh at var(--gx) var(--gy), rgba(var(--c1),1) 0%, rgba(var(--c2),.92) 40%, rgba(var(--c1),.92) 100%),
    conic-gradient(from 0deg at 70% 15%, rgba(255,255,255,.75), rgba(255,255,255,.85), rgba(255,255,255,.75));
  transition:background .2s linear;
}
/* halus motif batik (SVG tile) */
.pattern {
  position: fixed;
  inset: 0;
  z-index: -2;
  mix-blend-mode: multiply;
  opacity: .08;
  pointer-events: none;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'><defs><pattern id='p' width='60' height='60' patternUnits='userSpaceOnUse'><path d='M30 3c6 12 6 42 0 54c-6-12-6-42 0-54z' fill='%23c7b08c'/><circle cx='10' cy='10' r='3' fill='%23d9c7a5'/><circle cx='50' cy='50' r='3' fill='%23d9c7a5'/><path d='M0 30h60' stroke='%23d3c2a0' stroke-width='1'/><path d='M30 0v60' stroke='%23d3c2a0' stroke-width='1'/></pattern></defs><rect width='100%' height='100%' fill='url(%23p)'/></svg>");
  background-size: 120px 120px;
}
.filigree{
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
}

/* Kontainer 2 gunungan tengah */
.g-center{
  position: absolute;
  left: 50%; top: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  gap: 20px;          /* jarak antar gunungan tengah */
  z-index: 1;
}

.g-center img{
  height: 300px;      /* ukuran utama */
  width: auto;
  opacity: .95;
  /* filter: grayscale(1); */
}

/* Bayangan kiri & kanan */
.filigree::before,
.filigree::after{
  content: "";
  position: absolute;
  top: 50%;
  width: 240px;       /* ukuran bayangan */
  aspect-ratio: 3/4;
  background: center / contain no-repeat url('assets/images/gunungan.webp');
  transform: translate(-50%, -50%);
  opacity: .7;
  filter: blur(.4px);
  z-index: 0;
}

/* Kiri */
.filigree::before{
  left: calc(50% - 100px);
  animation: swayL 7s ease-in-out infinite;
}

/* Kanan */
.filigree::after{
  left: calc(50% + 100px);
  animation: swayR 7s ease-in-out infinite;
}

/* Animasi goyang */
@keyframes swayL{
  0%,100% { transform: translate(-50%,-50%) translateX(0); }
  50%     { transform: translate(-50%,-50%) translateX(-12px); }
}
@keyframes swayR{
  0%,100% { transform: translate(-50%,-50%) translateX(0); }
  50%     { transform: translate(-50%,-50%) translateX(12px); }
}




/* =================== UTILITIES =================== */
.section{padding:72px 18px; position:relative; overflow:clip}
.center{text-align:center}
.card{ margin-bottom: 7px;
    margin-top:7px; background: rgba(255,255,255,.88); border:1px solid var(--line); border-radius:18px; padding:16px; box-shadow:0 18px 40px #00000012; backdrop-filter:saturate(110%) blur(6px)}
.badge{display:inline-flex;align-items:center;gap:8px;padding:6px 12px;border-radius:999px;background:#f4e8d6;color:var(--accent2);font-weight:700;letter-spacing:.8px}
.pill{display:inline-flex;align-items:center;gap:8px;background:var(--accent);color:#fff;border-radius:999px;padding:10px 14px;font-weight:700;text-decoration:none}
.hr{width:70px;height:3px;background:linear-gradient(90deg,#d7bc94,#b07a3f,#d7bc94);border-radius:2px;margin:10px auto}
.hidden{display:none}

/* =================== OPENING GATE =================== */
#gate{position:fixed;inset:0;z-index:9999;display:grid;place-items:center;background:#0003}
.gate{width:92vw;max-width:420px;border-radius:26px;overflow:hidden;position:relative;border:1px solid #ffffff80}
.gate .ph{aspect-ratio:3/5;background:url('https://images.unsplash.com/photo-1606800052052-a08af7148866?q=80&w=1200&auto=format&fit=crop') center/cover no-repeat;filter:brightness(.9)}
.gate .ov{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;padding:22px 20px 18px;color:#2b251f;text-align:center;background:linear-gradient(180deg,rgba(255,255,255,0) 40%,rgba(255,255,255,.95))}
.brand{font-family:"Great Vibes",cursive;font-size:36px}
.names{font-family:"Playfair Display",serif;font-weight:800;font-size:26px;letter-spacing:2px;margin-top:2px}
.btn{display:inline-flex;gap:8px;align-items:center;justify-content:center;border:0;border-radius:999px;padding:12px 16px;font-weight:800}
.btn-primary{background:var(--accent);color:#fff;box-shadow:0 12px 26px #b07a3f44;margin-top:12px}
.mag{position:relative;transition:transform .15s}

/* =================== HERO =================== */
.hero{padding:0px}
.slider {
  position: relative;
  width: 100%;
  height: 68vh;
  max-height: 740px;
  border-radius: 0 0 22px 22px; /* atas rata, bawah melengkung */
  overflow: hidden;
  box-shadow: 0 14px 34px #00000014;
  transform: translateZ(0);
}

.slide{position:absolute;inset:0;background-size:cover;background-position:center;opacity:0;transition:opacity .9s ease, transform 9s ease;transform:scale(1.06)}
.slide.active{opacity:1;transform:scale(1.0)}
.overlay-soft {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    to top,
    rgba(248, 237, 220, 0.9) 0%,    /* pekat di paling bawah */
    rgba(248, 237, 220, 0.65) 25%,  /* masih cukup pekat */
    rgba(248, 237, 220, 0.35) 55%,  /* mulai memudar */
    rgba(248, 237, 220, 0) 100%     /* full transparan di atas */
  );
}


.hero-txt{position:absolute;inset:auto 0 10px 0;z-index:2;text-align:center;color:#2c241f;text-shadow:0 2px 10px #ffffffa0}
.hero-txt .sub{font-family:"Great Vibes",cursive;font-size:28px}
.hero-txt h1{font-family:"Playfair Display",serif;font-size:36px;letter-spacing:2px;margin:4px 0 0}
.hero-txt .date{letter-spacing:4px;font-weight:700;margin-top:6px}
.scroll-ico{width:26px;height:42px;border:2px solid var(--accent2);border-radius:16px;margin:12px auto 2px;position:relative}
.scroll-ico:after{content:"";position:absolute;left:50%;top:6px;transform:translateX(-50%);width:6px;height:10px;border-radius:3px;background:var(--accent2);animation:wheel 1.6s infinite}
@keyframes wheel{0%{opacity:0;transform:translate(-50%,0)}40%{opacity:1}100%{opacity:0;transform:translate(-50%,12px)}}

/* ornamen gunungan kecil mengapung */
.orn{position:absolute;opacity:.20;pointer-events:none}
.orn.a{top:10px;left:10px;width:120px;animation:float 12s ease-in-out infinite}
.orn.b{top:10px;right:10px;width:120px;animation:float 14s ease-in-out reverse infinite}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}

/* tilt parallax */
.tilt{transform-style:preserve-3d;perspective:1000px}
.tilt .slide{transform:translateZ(0) rotateX(calc(var(--ty,0)*1deg)) rotateY(calc(var(--tx,0)*1deg)) scale(1.05)}

/* Save the date */
.save{color:#2c241f}
.count{display:flex;justify-content:center;gap:12px;margin:14px 0}
.count .box{width:68px;background:#fff;border:1px solid var(--line);color:#2f2621;text-align:center;border-radius:12px;padding:10px 6px;font-weight:800}
.count small{display:block;font-size:11px;opacity:.7;margin-top:3px}
/* CARD krem + border hitam */
.card-cream{
  position: relative;
  background: rgba(255,255,255,.88);                 /* krem */
  border: 2px solid #d9b98a;           /* warna border */
  border-radius: 22px;
  padding: 18px 16px 22px;
  width: min(100% - 24px, 680px);
  margin: 12px auto;
  overflow: hidden;
  /* shadow luar: tint sesuai border (#d9b98a) */
  box-shadow: 0 14px 28px rgba(217,185,138, .35);
}

/* Inner shadow cekung, tanpa hitam – pakai tint coklat krem */
.card-inset{
  box-shadow:
    inset 0 22px 48px rgba(184,147,99, .35),   /* atas agak gelap (tinted) */
    inset 0 -18px 38px rgba(184,147,99, .22),  /* bawah halus */
    inset 0 0 0 1px rgba(255,248,237, .35),    /* inner highlight tipis */
    0 14px 28px rgba(217,185,138, .35);        /* ulangi shadow luar */
}

/* Smooth anchor scroll seluruh halaman */
html { scroll-behavior: smooth; }

/* --- Bouquet swapped --- */
.card-bouquet::before,
.card-bouquet::after{
     z-index: 0;
  content:"";
  position:absolute; pointer-events:none;
  background-image:url('https://e3k53m4o92i.exactdn.com/wp-content/uploads/2024/10/Garden-03-Bouquet.png?strip=all&lossy=1&ssl=1');
  background-repeat:no-repeat; background-size:contain; background-position:center;
  opacity:0; transform-origin:center; will-change:transform,opacity; z-index:0;
}

/* BAWAH-KIRI (sebelumnya atas-kiri) */
/* .card-bouquet::before{
  width:56%; aspect-ratio:1/1;
  left:-8%; bottom:-18%;
  transform: translate(-20%, 20%) rotate(10deg) scale(.94);
} */

/* ATAS-KANAN (sebelumnya bawah-kanan) */
.card-bouquet::after{
  width:56%; aspect-ratio:1/1;
  right:-8%; top:-14%;
  transform: translate(20%, -20%) rotate(-10deg) scale(.94);
}

/* saat terlihat */
.card-bouquet.show-flowers::before{
  animation:
    bouquetInBL 1.05s cubic-bezier(.22,.61,.36,1) forwards,
    bouquetFloat 9s ease-in-out 1.05s infinite;
}
.card-bouquet.show-flowers::after{
  animation:
    bouquetInTR 1.05s cubic-bezier(.22,.61,.36,1) .18s forwards,
    bouquetFloat 9s ease-in-out 1.23s infinite reverse;
}

/* Entry dari Bawah-Kiri */
@keyframes bouquetInBL{
  0%   {opacity:0; transform: translate(-20%, 20%) rotate(10deg) scale(.94);}
  60%  {opacity:1;}
  100% {opacity:1; transform: translate(0,0) rotate(0) scale(1);}
}
/* Entry dari Atas-Kanan */
@keyframes bouquetInTR{
  0%   {opacity:0; transform: translate(20%, -20%) rotate(-10deg) scale(.94);}
  60%  {opacity:1;}
  100% {opacity:1; transform: translate(0,0) rotate(0) scale(1);}
}
/* Float halus setelah masuk */
@keyframes bouquetFloat{
  0%,100% { transform: translate(0,0) rotate(0) scale(1); }
  50%     { transform: translate(0,-6px) rotate(1.2deg) scale(1.01); }
}

/* Hormati preferensi aksesibilitas */
@media (prefers-reduced-motion: reduce){
  .card-bouquet::before,
  .card-bouquet::after{ animation: none !important; opacity:.9; transform:translate(0,0) scale(1); }
}



/* Events + Maps */
.event .head{font-family:"Playfair Display",serif;font-size:26px;margin:6px 0 10px;color:var(--accent2)}
.mapwrap{position:relative;z-index:1;margin-top:10px;border-radius:14px;overflow:hidden;border:1px solid var(--line)}
.mapwrap iframe{display:block;width:100%;height:220px;border:0}

/* Gallery */
/* .gallery{position:relative;z-index:2;display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
.gallery img{border-radius:12px;aspect-ratio:3/4;object-fit:cover;cursor:pointer;transition:transform .2s ease; height: 220px;}
.gallery img:active{transform:scale(.98)} */

/* Lightbox */
.lb{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:#000d;z-index:9990}
.lb.open{display:flex}
.lb .stage{position:relative;width:92vw;height:86vh}
.lb img{position:absolute;inset:0;margin:auto;max-width:100%;max-height:100%;border-radius:14px;box-shadow:0 24px 40px #0006}
.nav{position:absolute;top:50%;transform:translateY(-50%);width:44px;height:44px;border:0;border-radius:50%;display:grid;place-items:center;background:#0007;color:#fff}
.nav.prev{left:8px}.nav.next{right:8px}
.close{z-index: 99; position:absolute;top:8px;right:8px;border:0;border-radius:999px;background:#b07a3f;color:#fff;padding:8px 11px}

/* Gift & QRIS */
.copyrow{display:grid;gap:10px}
.bank{display:flex;justify-content:space-between;gap:10px;align-items:center;background:#fff;border:1px solid var(--line);border-radius:12px;padding:10px}
.bank .meta{font-size:14px}
.btn-mini{background:var(--accent2);color:#fff;border:0;border-radius:10px;padding:8px 10px;font-weight:800}

/* Modal QRIS */
.modal{position:fixed;inset:0;background:#000a;display:none;align-items:center;justify-content:center;z-index:9992}
.modal.open{display:flex}
.modal .box{background:#fff;border:1px solid var(--line);border-radius:16px;padding:12px;width:min(92vw,420px)}
.modal .box img{width:100%;border-radius:10px}
.modal .top{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.modal .top h4{margin:0}

/* Wishes */
.form{display:grid;gap:10px}
.form input,.form textarea,.form select{width:100%;padding:12px;border:1px solid var(--line);border-radius:12px;background:#fff;font:inherit}
.form button{background:var(--accent2);color:#fff;border:0;border-radius:12px;padding:12px 14px;font-weight:800}
.badge-in{display:inline-block;margin-top:6px;padding:4px 10px;border-radius:999px;font-weight:700}
.in{background:#e7f6ea;border:1px solid #b7e0c0}
.out{background:#ffe8e8;border:1px solid #ffd0d0}
#wishList{max-height:260px;overflow:auto;scroll-behavior:smooth}

/* Footer + petals */
footer{padding:68px 18px 96px}
footer h3{font-family:"Great Vibes",cursive;font-size:44px;margin:0 0 8px;color:#33291f}
.particles{pointer-events:none;position:absolute;inset:0}
.particles span{position:absolute;bottom:-30px;width:10px;height:10px;border-radius:50%;
  background:radial-gradient(#d9b98a,#e7d6b900 60%);box-shadow:0 0 8px #dabb8a80;animation:rise 12s linear infinite}
@keyframes rise{0%{transform:translateY(0) scale(.7);opacity:.0}10%{opacity:.85}100%{transform:translateY(-120vh) scale(1.05);opacity:0}}

.music{position:fixed;right:14px;bottom:14px;width:56px;height:56px;border-radius:50%;background:#fff;border:2px solid var(--accent2);display:grid;place-items:center;z-index:9993;box-shadow:0 8px 18px #0002}

/* Reveals */
.reveal{opacity:0;transform:translateY(22px) scale(.99);transition:opacity .8s ease, transform .8s ease}
.reveal.on{opacity:1;transform:translateY(0) scale(1)}
.reveal[data-variant="L"]{transform:translateX(-24px)}
.reveal[data-variant="R"]{transform:translateX(24px)}
.reveal[data-variant="L"].on,.reveal[data-variant="R"].on{transform:translateX(0)}

/* Ripple */
.ripple{position:relative;overflow:hidden}
.ripple::after{content:"";position:absolute;inset:auto;width:0;height:0;border-radius:50%;background:rgba(255,255,255,.4);transform:translate(-50%,-50%);pointer-events:none;animation:rip .6s ease-out forwards}
@keyframes rip{from{width:0;height:0;opacity:.8}to{width:180px;height:180px;opacity:0}}

/* mobile-only polish */
@media (min-width:768px){ body{display:grid;place-items:center} }
</style>
</head>
<body>

<!-- ===== fixed BG, motif & filigree (ornamen) ===== -->
<div class="bg" id="bg"></div>
<div class="pattern"></div>
<div class="filigree">
  <div class="g-center">
    <!-- <img src="assets/images/gunungan.webp" alt="Gunungan 1"> -->
    <img src="assets/images/gunungan2.png" alt="Gunungan 2">
  </div>
</div>


<main>

<!-- ===== MUSIC BTN ===== -->
<button class="music mag" id="musicBtn" aria-label="musik"><i class="fa-solid fa-music"></i></button>
<audio id="bgm" loop>
  <!-- EDIT DI SINI: musik -->
  <source src="assets/music/music.mp3" type="audio/mp3"/>
</audio>

<!-- ===== OPENING GATE ===== -->
<div id="gate" role="dialog" aria-modal="true">
  <div class="gate">
    <div class="ph"></div>
    <div class="ov">
      <div class="brand ">The Wedding of</div>
      <div class="names ">ILHAM &amp; SAHITYA</div>
      <p style="margin:8px 0 0;opacity:.95" class="">Kepada Yth.</p>
      <button id="openBtn" class="btn btn-primary ripple mag">
        <i class="fa-solid fa-envelope-open-text"></i> Buka Undangan
      </button>
    </div>
  </div>
</div>




<!-- ===== HERO ===== -->
<header class="hero section center" data-bg="#fffaf2,#efe1c9">
  <!-- gunungan kecil -->
  <img class="orn a" src="assets/images/gunungan.webp" alt="">
  <img class="orn b" src="assets/images/gunungan.webp" alt="">
  <div class="slider tilt" id="slider">
    <!-- EDIT DI SINI: foto hero -->
    <div class="slide active" style="background-image:url('assets/images/slide1.jpg')"></div>
    <div class="slide" style="background-image:url('assets/images/slide2.jpg')"></div>
    <div class="slide" style="background-image:url('assets/images/slide3.jpg')"></div>
    <div class="slide" style="background-image:url('assets/images/slide4.jpg')"></div>
    <div class="overlay-soft"></div>
    <div class="hero-txt">
      <div class="sub animate-words">The Wedding of</div>
      <h1 class="reveal animate-words" data-variant="L">ILHAM  <span style="color:#b07a3f">&amp;</span>  SAHITYA</h1>
      <div class="date reveal animate-words" data-variant="R">02 • 10 • 2025</div>
      <div class="scroll-ico" aria-hidden="true"></div>
    </div>
  </div>
</header>

<!-- ===== COUPLE & QUOTE ===== -->
<section class="section" data-bg="#fff8ec,#f8eddc">
  <div class="card reveal" id="qCard">
    <div class="center">
      <i class="fa-solid fa-archway anim-arch" style="color:#b07a3f;font-size:28px"></i>
      <div class="hr anim-hr"></div>
    </div>

    <!-- EDIT DI SINI: foto -->
    <div style="display:flex; justify-content:center; margin-top:8px;">
      <span class="photo-mask anim-img">
        <img src="assets/images/gambarutama.jpg" alt="Ilham & Sahitya">
      </span>
    </div>

    <p class="anim-para" style="line-height:1.8;margin-top:12px">
      “Dan di antara tanda-tanda (kebesaran)-Nya ialah Dia menciptakan pasangan-pasangan untukmu agar kamu
      cenderung dan merasa tenteram kepadanya, dan Dia menjadikan di antaramu rasa kasih dan sayang.”
      <br><b>QS. Ar-Rum : 21</b>
    </p>
  </div>
</section>


<style>
    /* Garis dekor di bawah ikon */
.center .hr{
  height:2px; width:96px; margin:6px auto 0;
  background: linear-gradient(90deg, transparent, #b07a3f, transparent);
  border-radius:99px;
}

/* --- VARIASI ANIMASI --- */

/* Icon: pop + wobble */
.anim-arch{
  display:inline-block;
  opacity:0;
  transform: translateY(-8px) rotate(-12deg) scale(.8);
  transition: transform .7s cubic-bezier(.22,.61,.36,1), opacity .7s;
}
.anim-arch.show{
  opacity:1; transform: translateY(0) rotate(0) scale(1);
  animation: archBob 6s ease-in-out 1.1s infinite;
}
@keyframes archBob{
  0%,100%{ transform: translateY(0) rotate(0) }
  50%    { transform: translateY(-2px) rotate(1deg) }
}

/* HR: grow dari tengah */
.anim-hr{
  transform-origin: center;
  transform: scaleX(0);
  opacity:0;
  transition: transform .7s cubic-bezier(.22,.61,.36,1), opacity .7s;
}
.anim-hr.show{
  transform: scaleX(1);
  opacity:1;
}

/* Foto: reveal clip-path + Ken Burns */
.photo-mask{
  display:inline-block;
  border-radius:14px; overflow:hidden;
}
.photo-mask img{
  display:block; height:205px; width:auto;
  transform: scale(1.08) translateY(8px);
  transition: transform 5s ease-out;
}
.anim-img{
  clip-path: inset(0 0 100% 0 round 14px);
  transition: clip-path .9s cubic-bezier(.22,.61,.36,1);
}
.anim-img.show{
  clip-path: inset(0 0 0 0 round 14px);
}
.anim-img.show img{
  transform: scale(1.02) translateY(0);
}

/* Ayat: flip 3D dari atas */
.anim-para{
  opacity:0;
  transform-origin: top center;
  transform: perspective(600px) rotateX(-35deg) translateY(12px);
  filter: blur(3px);
  transition: transform .8s cubic-bezier(.22,.61,.36,1), opacity .8s, filter .8s;
}
.anim-para.show{
  opacity:1; filter: blur(0);
  transform: perspective(600px) rotateX(0) translateY(0);
}

/* Aksesibilitas */
@media (prefers-reduced-motion: reduce){
  .anim-arch,.anim-hr,.anim-img,.anim-para{ transition:none; animation:none !important; }
  .anim-arch,.anim-hr,.anim-img,.anim-para{ opacity:1; transform:none; clip-path:none; }
}

</style>


<script>
  (function(){
    const card = document.getElementById('qCard');
    if(!card) return;
    const items = [
      card.querySelector('.anim-arch'),
      card.querySelector('.anim-hr'),
      card.querySelector('.anim-img'),
      card.querySelector('.anim-para')
    ].filter(Boolean);

    // Delay berurutan 0, 120, 240, 360 ms
    items.forEach((el,i)=> el.style.transitionDelay = (i*120)+'ms');

    const io = new IntersectionObserver((entries)=>{
      entries.forEach(entry=>{
        if(entry.isIntersecting){
          items.forEach(el=> el.classList.add('show'));
        }else{
          // biar muncul lagi kalau scroll balik
          items.forEach(el=> el.classList.remove('show'));
        }
      });
    }, { threshold:0.15, rootMargin:"0px 0px -10% 0px" });

    io.observe(card);
  })();
</script>


<!-- ===== SAVE THE DATE ===== -->
<section class="section save center" data-bg="#fff4e1,#f7ead2">
  <div class="card-cream card-inset" id="saveCard">
    <i class="fa-solid fa-calendar-heart anim-pop" style="font-size:28px;color:#b07a3f"></i>
    <h2 class="anim-up" style="font-family:'Great Vibes',cursive;font-size:40px;margin:8px 0 0">Save The Date</h2>

    <div class="count anim-stagger" id="count">
      <div class="box"><div id="d">0</div><small>Hari</small></div>
      <div class="box"><div id="h">0</div><small>Jam</small></div>
      <div class="box"><div id="m">0</div><small>Menit</small></div>
      <div class="box"><div id="s">0</div><small>Detik</small></div>
    </div>

    <p class="anim-fade" style="opacity:.95;margin:0 12px">
      Dengan memohon rahmat dan ridho Allah SWT, kami mengundang Bapak/Ibu/Saudara/i untuk menghadiri pernikahan kami.
    </p>
  </div>
</section>


<style>
    /* Icon: pop + wobble tipis */
#saveCard .anim-pop{
  display:inline-block; opacity:0;
  transform: translateY(-10px) scale(.85) rotate(-10deg);
  transition: transform .7s cubic-bezier(.22,.61,.36,1), opacity .7s;
}
#saveCard .anim-pop.show{
  opacity:1; transform: translateY(0) scale(1) rotate(0);
  animation: wob 6s ease-in-out 1.2s infinite;
}
@keyframes wob{ 0%,100%{transform:translateY(0) scale(1)} 50%{transform:translateY(-2px) scale(1.02)} }

/* Heading: slide-up + de-blur */
#saveCard .anim-up{
  opacity:0; filter:blur(3px); transform: translateY(12px);
  transition: transform .7s cubic-bezier(.22,.61,.36,1), opacity .7s, filter .7s;
}
#saveCard .anim-up.show{ opacity:1; filter:blur(0); transform: translateY(0); }

/* Paragraf: fade-in lembut */
#saveCard .anim-fade{ opacity:0; transform: translateY(8px);
  transition: transform .7s cubic-bezier(.22,.61,.36,1), opacity .7s; }
#saveCard .anim-fade.show{ opacity:1; transform: none; }

/* Counter: anak2 stagger otomatis */
#saveCard .anim-stagger{ opacity:1; } /* kontainer tetap terlihat */
#saveCard .anim-stagger .box{
  opacity:0; transform: translateY(10px) scale(.98);
  transition: transform .55s cubic-bezier(.22,.61,.36,1), opacity .55s;
}
#saveCard .anim-stagger.show .box{ opacity:1; transform: none; }
#saveCard .anim-stagger .box:nth-child(1){ transition-delay: 80ms; }
#saveCard .anim-stagger .box:nth-child(2){ transition-delay: 160ms; }
#saveCard .anim-stagger .box:nth-child(3){ transition-delay: 240ms; }
#saveCard .anim-stagger .box:nth-child(4){ transition-delay: 320ms; }

/* (Opsional) haluskan bila user minta reduce motion */
@media (prefers-reduced-motion: reduce){
  #saveCard .anim-pop, #saveCard .anim-up, #saveCard .anim-fade,
  #saveCard .anim-stagger .box{ transition:none; animation:none !important; opacity:1; transform:none; filter:none; }
}

</style>

<script>
(function(){
  const card = document.getElementById('saveCard');
  if(!card) return;

  const icon  = card.querySelector('.anim-pop');
  const head  = card.querySelector('.anim-up');
  const para  = card.querySelector('.anim-fade');
  const count = card.querySelector('.anim-stagger');

  // Set delay berurutan simple
  if (icon) icon.style.transitionDelay = '0ms';
  if (head) head.style.transitionDelay = '120ms';
  if (count) count.style.transitionDelay = '240ms';
  if (para) para.style.transitionDelay = '360ms';

  const io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        card.classList.add('show-flowers');      // kalau kamu pakai efek bouquet sebelumnya
        icon && icon.classList.add('show');
        head && head.classList.add('show');
        count && count.classList.add('show');
        para && para.classList.add('show');
      }else{
        // re-trigger saat scroll naik/turun
        icon && icon.classList.remove('show');
        head && head.classList.remove('show');
        count && count.classList.remove('show');
        para && para.classList.remove('show');
        card.classList.remove('show-flowers');
      }
    });
  }, { threshold: 0.15, rootMargin: "0px 0px -10% 0px" });

  io.observe(card);
})();
</script>

<script>
  const saveCard = document.getElementById('saveCard');
  if (saveCard){
    const io = new IntersectionObserver((entries)=>{
      for (const e of entries){
        if (e.isIntersecting){
          saveCard.classList.add('show-flowers');
          io.unobserve(saveCard); // cukup sekali
        }
      }
    }, {
      threshold: 0.15,             // muncul saat 15% card terlihat
      rootMargin: "0px 0px -15% 0" // pre-trigger sebelum full masuk
    });
    io.observe(saveCard);
  }
</script>



<!-- Confetti CDN -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
  // Target: 2 Oktober 2025 00:00:00 (ikut zona waktu pengunjung)
  const target = new Date(2025, 9, 2, 0, 0, 0).getTime(); // bulan 9 = Oktober (0-based)
  const elD = document.getElementById('d');
  const elH = document.getElementById('h');
  const elM = document.getElementById('m');
  const elS = document.getElementById('s');
  const countWrap = document.getElementById('count');

  let fired = false;
  const tick = setInterval(() => {
    const now = Date.now();
    let diff = target - now;

    if (diff <= 0) {
      // set 0 semua
      elD.textContent = elH.textContent = elM.textContent = elS.textContent = '0';
      if (!fired) {
        fired = true;
        clearInterval(tick);
        celebrate();
        // Opsional: ganti teks
        // countWrap.insertAdjacentHTML('afterend', '<p style="margin-top:8px"><b>Acara dimulai hari ini!</b></p>');
      }
      return;
    }

    const d = Math.floor(diff / (1000*60*60*24));
    diff -= d * (1000*60*60*24);
    const h = Math.floor(diff / (1000*60*60));
    diff -= h * (1000*60*60);
    const m = Math.floor(diff / (1000*60));
    diff -= m * (1000*60);
    const s = Math.floor(diff / 1000);

    elD.textContent = d;
    elH.textContent = h.toString().padStart(2,'0');
    elM.textContent = m.toString().padStart(2,'0');
    elS.textContent = s.toString().padStart(2,'0');
  }, 1000);

  // Efek konfeti manis
  function celebrate() {
    // ledakan awal
    confetti({ particleCount: 120, spread: 70, origin: { y: 0.6 } });
    // rentetan kiri-kanan 1.2 detik
    const duration = 1200;
    const end = Date.now() + duration;
    (function frame() {
      confetti({ startVelocity: 45, spread: 55, ticks: 120, origin: { x: 0.1, y: 0.7 } });
      confetti({ startVelocity: 45, spread: 55, ticks: 120, origin: { x: 0.9, y: 0.7 } });
      if (Date.now() < end) requestAnimationFrame(frame);
    })();
  }
</script>


<!-- ===== EVENTS ===== -->
<section class="section event" data-bg="#fff8ec,#efe1c9">
  <div class="card reveal" id="eventCard" style="margin-bottom:12px">
    <span class="badge anim"><i class="fa-solid fa-ring"></i> AKAD & RESEPSI NIKAH</span>
    <div class="head anim">Kamis • 2 / Oktober / 2025</div>
    <div class="anim"><i class="fa-solid fa-clock"></i> 08.00 WIB – 10.00 WIB</div>
    <div class="anim" style="margin-top:6px">
      <i class="fa-solid fa-location-dot"></i> <b>Kediaman Mempelai Wanita</b><br>Jln Hoscokroaminoto Dusun Jeblog RT 1 RW 2 Desa Pehwetan Kec Papar Kab Kediri
    </div>

    <div class="mapwrap anim anim-zoom">
      <iframe loading="lazy" referrerpolicy="no-referrer-when-downgrade"
        src="https://www.google.com/maps?q=Jalan%20Raya%20Bojongsari%20No.5,%20Gunung%20Putri&output=embed"></iframe>
    </div>

    <div class="anim" style="display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-top:13px;">
      <a class="pill ripple" target="_blank" href="https://maps.app.goo.gl/QJin34YBpubNYTLx9">
        <i class="fa-solid fa-map-location-dot"></i> Google Map
      </a>
      <a class="pill ripple" target="_blank" href="https://www.google.com/calendar/render?action=TEMPLATE&text=Akad+Ilham+%26+Sahitya&dates=20241231T010000Z/20241231T030000Z&details=Akad+Nikah&location=Jalan+Raya+Bojongsari+No.5,+Gunung+Putri">
        <i class="fa-solid fa-calendar-plus"></i> Tambah ke Calendar
      </a>
    </div>
  </div>
</section>
<style>
    /* base anim */
.section.event .anim{
  opacity:0;
  transform: translateY(14px);
  filter: blur(2px);
  transition: transform .6s cubic-bezier(.22,.61,.36,1), 
              opacity .6s cubic-bezier(.22,.61,.36,1),
              filter .6s;
  will-change: transform, opacity, filter;
}
.section.event .anim.show{
  opacity:1;
  transform: translateY(0);
  filter: blur(0);
}

/* map sedikit zoom-in */
.section.event .anim-zoom{ transform: translateY(14px) scale(.98); }
.section.event .anim-zoom.show{ transform: translateY(0) scale(1); }

/* aksesibilitas */
@media (prefers-reduced-motion: reduce){
  .section.event .anim,
  .section.event .anim-zoom{ transition:none; transform:none; filter:none; opacity:1; }
}

</style>

<script>
  (function(){
    const card = document.getElementById('eventCard');
    if(!card) return;

    const items = card.querySelectorAll('.anim');

    // kasih jeda berurutan 0ms, 90ms, 180ms, ...
    items.forEach((el, i) => el.style.transitionDelay = (i * 90) + 'ms');

    const io = new IntersectionObserver((entries)=>{
      entries.forEach(entry=>{
        if(entry.isIntersecting){
          items.forEach(el => el.classList.add('show'));
        }else{
          // biar kalau scroll balik, animnya muncul lagi
          items.forEach(el => el.classList.remove('show'));
        }
      });
    }, { threshold: 0.15, rootMargin: "0px 0px -10% 0px" });

    io.observe(card);
  })();
</script>

<!-- ===== GALLERY ===== -->
<!-- ====== GALLERY + LIGHTBOX (FULLCODE: HTML + CSS + JS) ====== -->
<section class="section" data-bg="#fffdf7,#f2e6d6">
  <div class="center" style="margin-bottom:10px">
    <i class="fa-solid fa-images" style="font-size:26px;color:#b07a3f"></i>
    <h3 style="margin:6px 0 0;font-family:'Playfair Display',serif">Our Gallery</h3>
  </div>

  <div class="gallery" id="gal">
    <!-- EDIT FOTO -->
    <img src="assets/images/slide1.jpg" alt="" loading="lazy">
    <img src="assets/images/slide1.jpg" alt="" loading="lazy">
    <img src="assets/images/slide1.jpg" alt="" loading="lazy">
    <img src="assets/images/slide1.jpg" alt="" loading="lazy">
    <img src="assets/images/slide1.jpg" alt="" loading="lazy">
    <img src="assets/images/slide1.jpg" alt="" loading="lazy">
  </div>
</section>

<!-- Lightbox -->
<div class="lb" id="lb2" aria-hidden="true">
  <div class="stage" id="stage">
    <button class="nav prev" id="prev" type="button" aria-label="Previous"><i class="fa-solid fa-angle-left"></i></button>
    <button class="nav next" id="next" type="button" aria-label="Next"><i class="fa-solid fa-angle-right"></i></button>
    <button class="close" id="close" type="button" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
  </div>
</div>

<style>
  /* ===== GRID & TILE ===== */
  .gallery{
    position:relative; z-index:2;
    display:grid; grid-template-columns:repeat(2,1fr); gap:10px;
  }
  @media (min-width:540px){
    .gallery{ grid-template-columns:repeat(3,1fr); gap:12px; }
  }
  .gallery img{
    width:100%; aspect-ratio:3/4; object-fit:cover;
    border-radius:12px;
    border:2px solid #b07a3f;                 /* border coklat */
    cursor:pointer; user-select:none; -webkit-user-drag:none;

    /* state awal (sebelum terlihat) */
    opacity:0; transform:translateY(16px) scale(.985); filter:blur(2px);
    transition: box-shadow .25s, filter .25s; /* transform/opacity via keyframes */
    will-change: transform, opacity, filter;
  }

  /* Hover/tap feel */
  .gallery img:hover,
  .gallery img:focus-visible{
    transform:translateY(-3px) scale(1.05) !important;
    box-shadow:0 14px 28px rgba(0,0,0,.18);
    filter:saturate(1.06);
    outline:none;
  }
  .gallery img:active{ transform:scale(.98) !important }

  /* Animasi masuk sesuai arah scroll */
  @keyframes revealUp{
    from{opacity:0;transform:translateY(18px) scale(.985);filter:blur(2px)}
    to  {opacity:1;transform:translateY(0)    scale(1);   filter:blur(0)}
  }
  @keyframes revealDown{
    from{opacity:0;transform:translateY(-18px) scale(.985);filter:blur(2px)}
    to  {opacity:1;transform:translateY(0)     scale(1);   filter:blur(0)}
  }
  .gallery img.in-up{
    animation:revealUp .6s cubic-bezier(.22,.61,.36,1) var(--delay,0ms) both;
  }
  .gallery img.in-down{
    animation:revealDown .6s cubic-bezier(.22,.61,.36,1) var(--delay,0ms) both;
  }

  /* ===== LIGHTBOX ===== */
  .lb{
    position:fixed; inset:0; z-index:9999;
    background: rgba(0,0,0,.55);
    backdrop-filter: blur(2px);
    opacity:0; pointer-events:none;
    transition: opacity .28s ease;
  }
  .lb.open{ opacity:1; pointer-events:auto; }

  .stage{
    position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
    padding:18px;
  }
  .stage img{
    max-width:92vw; max-height:86vh; border-radius:14px;
    box-shadow:0 20px 60px rgba(0,0,0,.45);
    transform:scale(.96); opacity:0; transition:transform .28s ease, opacity .28s ease;
    user-select:none; -webkit-user-drag:none;
  }
  .lb.open .stage img{ transform:scale(1); opacity:1; }

  /* Buttons */
  .lb .nav, .lb .close{
    position:absolute; display:grid; place-items:center;
    width:42px; height:42px; border-radius:999px;
    background: rgba(255,255,255,.9);
    box-shadow:0 6px 16px rgba(0,0,0,.25);
    border:none; cursor:pointer;
    transition: transform .18s ease, background .18s ease;
  }
  .lb .nav:hover, .lb .close:hover{ transform:scale(1.06); background:#fff; }
  .lb .nav:active, .lb .close:active{ transform:scale(.96); }
  .lb .nav i, .lb .close i{ font-size:18px; color:#333; pointer-events:none; }

  .lb .prev{ left:12px; top:50%; transform:translateY(-50%); }
  .lb .next{ right:12px; top:50%; transform:translateY(-50%); }
  .lb .close{ right:12px; top:12px; }

  /* body lock saat LB aktif */
  body.noscroll{ overflow:hidden; }

  @media (prefers-reduced-motion:reduce){
    .gallery img{ transition:none; animation:none; opacity:1; transform:none; filter:none }
    .lb, .stage img{ transition:none }
  }
</style>

<script>
(()=> {
  /* ---------- LIGHTBOX ---------- */
  const gal     = document.getElementById('gal');
  const lb      = document.getElementById('lb2');
  const stage   = document.getElementById('stage');
  const btnPrev = document.getElementById('prev');
  const btnNext = document.getElementById('next');
  const btnClose= document.getElementById('close');
  if(!gal || !lb || !stage) return;

  const thumbs = [...gal.querySelectorAll('img')];
  let cur = -1, imgEl = null;

  function openAt(i){
    if(i < 0) i = thumbs.length - 1;
    if(i >= thumbs.length) i = 0;
    cur = i;

    if(!imgEl){
      imgEl = document.createElement('img');
      imgEl.draggable = false;
      stage.appendChild(imgEl);
    }
    imgEl.src = thumbs[cur].src;

    lb.classList.add('open');
    lb.setAttribute('aria-hidden', 'false');
    document.body.classList.add('noscroll');
  }
  function closeLb(){
    lb.classList.remove('open');
    lb.setAttribute('aria-hidden', 'true');
    document.body.classList.remove('noscroll');
  }
  function showPrev(){ openAt(cur - 1); }
  function showNext(){ openAt(cur + 1); }

  thumbs.forEach((t,i)=> t.addEventListener('click', ()=> openAt(i)));
  btnPrev.addEventListener('click', e => { e.stopPropagation(); showPrev(); });
  btnNext.addEventListener('click', e => { e.stopPropagation(); showNext(); });
  btnClose.addEventListener('click',e => { e.stopPropagation(); closeLb(); });

  // klik area gelap = close
  lb.addEventListener('click', e => { if(e.target === lb) closeLb(); });

  // keyboard
  document.addEventListener('keydown', e => {
    if(!lb.classList.contains('open')) return;
    if(e.key === 'Escape') closeLb();
    if(e.key === 'ArrowLeft') showPrev();
    if(e.key === 'ArrowRight') showNext();
  });

  // swipe mobile
  let sx = 0;
  lb.addEventListener('touchstart', e => sx = e.touches[0].clientX, {passive:true});
  lb.addEventListener('touchend',   e => {
    const dx = e.changedTouches[0].clientX - sx;
    if(Math.abs(dx) > 40) (dx > 0 ? showPrev() : showNext());
  }, {passive:true});

  /* ---------- SCROLL-DIRECTION REVEAL ---------- */
  let lastY = window.scrollY, direction = 'down';
  window.addEventListener('scroll', () => {
    const y = window.scrollY;
    direction = (y > lastY) ? 'down' : 'up';
    lastY = y;
  }, {passive:true});

  // Observer: re-trigger saat masuk/keluar viewport
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(entry=>{
      const el = entry.target;
      if(entry.isIntersecting){
        if(!el.dataset.i){ el.dataset.i = [...el.parentNode.children].indexOf(el); }
        el.style.setProperty('--delay', (parseInt(el.dataset.i,10) * 70) + 'ms');
        el.classList.remove('in-up','in-down'); // reset
        void el.offsetWidth;                    // reflow
        el.classList.add(direction === 'down' ? 'in-up' : 'in-down');
      }else{
        el.classList.remove('in-up','in-down');
        el.style.opacity = 0;
        el.style.transform = 'translateY(16px) scale(.985)';
        el.style.filter = 'blur(2px)';
      }
    });
  }, { threshold:.25, rootMargin:'0px 0px -10% 0px' });

  thumbs.forEach((img,i)=>{ img.dataset.i=i; io.observe(img); });
})();
</script>



<!-- ===== GIFT + QRIS ===== -->
<section class="section" data-bg="#fff8ec,#efe1c9">
  <div class="card reveal">
    <div class="center">
      <i class="fa-solid fa-gift" style="font-size:28px;color:#b07a3f"></i>
      <h3 style="margin:8px 0 0;font-family:'Playfair Display',serif">Wedding Gift</h3>
    </div>
    <p class="center" style="margin:8px 0 14px">Doa restu Anda sangat berarti. Bila ingin berbagi hadiah, data berikut kami sediakan:</p>

    <div class="copyrow">
      <div class="bank">
        <div class="meta">
          <b>BNI</b><br>No. Rekening: <b id="rek1">1852855245</b><br>a.n <b>Sahitya Nashiroh </b>
        </div>
        <button class="btn-mini ripple" onclick="copyText('rek1')"><i class="fa-solid fa-copy"></i> Copy</button>
      </div>
      <div class="bank">
        <div class="meta">
          <b>Bank Jatim</b><br>No. Rekening: <b id="rek2">1932043641</b><br>a.n <b>Ilham Permana Putra</b>
        </div>
        <button class="btn-mini ripple" onclick="copyText('rek2')"><i class="fa-solid fa-copy"></i> Copy</button>
      </div>
      <!-- <button class="btn-mini ripple" id="qrisBtn"><i class="fa-solid fa-qrcode"></i> Tampilkan QRIS</button> -->
    </div>

    <!-- <details style="margin-top:10px">
      <summary><b><i class="fa-solid fa-truck-fast"></i> Kirim Kado (klik untuk lihat alamat)</b></summary>
      <p style="margin:8px 0 0" id="alamatTxt">Ilham & Sahitya<br>Jalan Raya Bojongsari No.5, Gunung Putri, Citeureup, Bogor, Jawa Barat</p>
      <button class="btn-mini ripple" onclick="copyAlamat()"><i class="fa-solid fa-copy"></i> Copy Alamat</button>
    </details> -->
  </div>
</section>

<!-- Modal QRIS -->
<div class="modal" id="qrisModal" aria-hidden="true">
  <div class="box">
    <div class="top">
      <h4><i class="fa-solid fa-qrcode"></i> QRIS Pembayaran</h4>
      <button class="btn-mini ripple" id="closeQris"><i class="fa-solid fa-xmark"></i> Tutup</button>
    </div>
    <!-- EDIT DI SINI: ganti gambar QRIS kamu -->
    <img src="https://api.qrserver.com/v1/create-qr-code/?size=420x420&data=ILHAM%20SAHITYA%20QRIS" alt="QRIS">
    <small>Scan menggunakan aplikasi pembayaran yang mendukung QRIS.</small>
  </div>
</div>

<!-- ===== WISHES ===== -->
<section class="section" data-bg="#fffdf7,#f2e6d6">
  <div class="center" style="margin-bottom:10px">
    <i class="fa-solid fa-comments" style="font-size:24px;color:#b07a3f"></i>
    <h3 style="margin:6px 0 0;font-family:'Playfair Display',serif">Wishes</h3>
    <div style="opacity:.75">Ucapan Selamat & Do'a</div>
  </div>

  <div class="card reveal">
    <div class="center" style="display:flex;gap:10px;justify-content:center;margin-bottom:8px">
      <div class="badge-in in"><b id="hadirC">0</b> Hadir</div>
      <div class="badge-in out"><b id="absenC">0</b> Tidak Hadir</div>
    </div>

    <form class="form" id="wishForm">
      <input id="nama" placeholder="Nama" required/>
      <textarea id="ucapan" rows="3" placeholder="Ucapan" required></textarea>
      <select id="konfirmasi" required>
        <option value="" disabled selected>Konfirmasi Kehadiran</option>
        <option>Hadir</option>
        <option>Tidak Hadir</option>
      </select>
      <button type="submit" class="ripple"><i class="fa-solid fa-paper-plane"></i> Kirim</button>
    </form>

    <div id="wishList"></div>
  </div>
</section>

<!-- ===== FOOTER ===== -->
<footer class="section center" data-bg="#fff6e6,#f0e1c8">
  <div class="particles" aria-hidden="true"></div>
  <h3 class="reveal">Terima Kasih</h3>
  <p class="reveal" style="margin:6px 0 0">Kami yang berbahagia, <b>Ilham & Sahitya</b></p>
  <small class="reveal" style="opacity:.75">Designed with <i class="fa-solid fa-heart" style="color:#b07a3f"></i></small>
</footer>

</main>

<script>
/* ===== HEX -> RGB helper ===== */
function hexToRgbArray(hex){
  const m = hex.trim().replace('#','');
  const n = m.length===3 ? m.split('').map(x=>x+x).join('') : m;
  const int = parseInt(n,16);
  return [(int>>16)&255,(int>>8)&255,int&255];
}
function lerp(a,b,t){return a+(b-a)*t}
function mixRGB(a,b,t){return [lerp(a[0],b[0],t),lerp(a[1],b[1],t),lerp(a[2],b[2],t)]}

/* ===== BG blend per section (lebih terang) ===== */
const bgEl=document.getElementById('bg');
let currentC1=[250,246,238], currentC2=[241,229,211];
function setBG(c1,c2,dur=700){
  const start=performance.now(), s1=[...currentC1], s2=[...currentC2];
  function step(now){
    const t=Math.min(1,(now-start)/dur);
    const m1=mixRGB(s1,c1,t), m2=mixRGB(s2,c2,t);
    document.documentElement.style.setProperty('--c1', m1.map(x=>x.toFixed(2)).join(','));
    document.documentElement.style.setProperty('--c2', m2.map(x=>x.toFixed(2)).join(','));
    if(t<1) requestAnimationFrame(step); else {currentC1=c1; currentC2=c2;}
  }
  requestAnimationFrame(step);
}
const sections=[...document.querySelectorAll('[data-bg]')];
const obs=new IntersectionObserver((ents)=>{
  ents.forEach(e=>{
    if(e.isIntersecting){
      const [h1,h2]=e.target.getAttribute('data-bg').split(',');
      setBG(hexToRgbArray(h1), hexToRgbArray(h2), 800);
    }
  })
},{rootMargin:"-35% 0px -55% 0px",threshold:.01});
sections.forEach(s=>obs.observe(s));

/* ===== gradient focus follows pointer ===== */
addEventListener('pointermove',e=>{
  const x=(e.clientX/innerWidth)*100, y=(e.clientY/innerHeight)*100;
  document.documentElement.style.setProperty('--gx', x+'%');
  document.documentElement.style.setProperty('--gy', y+'%');
});

/* ===== Gate + music ===== */
const bgm=document.getElementById('bgm'), gate=document.getElementById('gate');
document.getElementById('openBtn').onclick=(ev)=>{
  gate.style.transition='opacity .6s ease, visibility 0s .6s';
  gate.style.opacity=0; gate.style.visibility='hidden';
  bgm.play().catch(()=>{});
};
const musicBtn=document.getElementById('musicBtn'); let playing=false;
function syncMusicBtn(){ musicBtn.innerHTML = playing ? '<i class="fa-solid fa-volume-high"></i>' : '<i class="fa-solid fa-music"></i>'; }
musicBtn.addEventListener('click',()=>{ playing?bgm.pause():bgm.play().catch(()=>{}); });
bgm.addEventListener('play',()=>{playing=true;syncMusicBtn()});
bgm.addEventListener('pause',()=>{playing=false;syncMusicBtn()});

/* ===== magnetic hover ===== */
document.querySelectorAll('.mag').forEach(el=>{
  el.addEventListener('pointermove',e=>{
    const r=el.getBoundingClientRect(), dx=(e.clientX-(r.left+r.width/2))/r.width, dy=(e.clientY-(r.top+r.height/2))/r.height;
    el.style.transform=`translate(${dx*6}px,${dy*6}px)`;
  });
  el.addEventListener('pointerleave',()=>el.style.transform='translate(0,0)');
});

/* ===== hero slider + tilt ===== */
const slides=[...document.querySelectorAll('.slide')]; let si=0;
setInterval(()=>{slides[si].classList.remove('active'); si=(si+1)%slides.length; slides[si].classList.add('active')}, 3600);
const slider=document.getElementById('slider');
function setTilt(x=0,y=0){ slider.style.setProperty('--tx',x); slider.style.setProperty('--ty',-y); }
addEventListener('deviceorientation', e=>{ const x=(e.gamma||0)/8, y=(e.beta||0)/12; setTilt(x,y) }, {passive:true});
slider.addEventListener('pointermove', e=>{ const r=slider.getBoundingClientRect(); const x=((e.clientX-r.left)/r.width-.5)*6; const y=((e.clientY-r.top)/r.height-.5)*6; setTilt(x,y) });
slider.addEventListener('pointerleave', ()=>setTilt(0,0));


/* ===== copy & QRIS modal ===== */
function copyText(id){const v=document.getElementById(id).textContent.trim(); navigator.clipboard.writeText(v); alert('Nomor rekening tersalin: '+v);}
function copyAlamat(){navigator.clipboard.writeText(document.getElementById('alamatTxt').innerText.trim()); alert('Alamat pengiriman tersalin.');}
window.copyText=copyText; window.copyAlamat=copyAlamat;
const qrisModal=document.getElementById('qrisModal');
document.getElementById('qrisBtn').onclick=()=>qrisModal.classList.add('open');
document.getElementById('closeQris').onclick=()=>qrisModal.classList.remove('open');
qrisModal.addEventListener('click',e=>{ if(e.target===qrisModal) qrisModal.classList.remove('open'); });

/* ===== wishes local + auto-scroll ===== */
const form=document.getElementById('wishForm'), list=document.getElementById('wishList');
let hadir=0, absen=0;
function updateStat(){document.getElementById('hadirC').textContent=hadir; document.getElementById('absenC').textContent=absen;}
function render(item,scrollTop=true){
  const box=document.createElement('div'); box.className='card';
  box.innerHTML=`<b>${item.nama}</b> <small style="opacity:.7">• ${new Date(item.t).toLocaleString('id-ID')}</small>
  <p style="margin:.4rem 0 0;white-space:pre-wrap">${item.u}</p>
  <span class="badge-in ${item.k==='Hadir'?'in':'out'}">${item.k}</span>`;
  list.prepend(box); if(scrollTop) list.scrollTo({top:0,behavior:'smooth'});
}
form.addEventListener('submit',e=>{
  e.preventDefault();
  const nama=document.getElementById('nama').value.trim();
  const u=document.getElementById('ucapan').value.trim();
  const k=document.getElementById('konfirmasi').value;
  if(!nama||!u||!k) return;
  const item={nama,u,k,t:Date.now()};
  render(item,true); if(k==='Hadir') hadir++; else absen++; updateStat(); form.reset();
});
let autoScroll=true;
function loopScroll(){
  if(!autoScroll){requestAnimationFrame(loopScroll);return;}
  if(list.scrollHeight>list.clientHeight){
    list.scrollTop=(list.scrollTop+0.35)%(list.scrollHeight-list.clientHeight+1);
  }
  requestAnimationFrame(loopScroll);
}
list.addEventListener('touchstart',()=>autoScroll=false,{passive:true});
list.addEventListener('touchend',()=>autoScroll=true,{passive:true});
requestAnimationFrame(loopScroll);

/* ===== Reveal on scroll ===== */
const revs=[...document.querySelectorAll('.reveal')];
revs.forEach(el=>{if(!el.dataset.variant){el.dataset.variant=Math.random()>.5?'L':'R';}});
const io=new IntersectionObserver(es=>es.forEach(e=>{if(e.isIntersecting){e.target.classList.add('on'); io.unobserve(e.target)}}),{threshold:.2});
revs.forEach(x=>io.observe(x));

/* ===== Footer petals ===== */
(function spawnParticles(){
  const host=document.querySelector('footer .particles'); if(!host) return;
  for(let i=0;i<16;i++){const s=document.createElement('span');
    s.style.left=Math.random()*100+'%';
    s.style.animationDelay=(Math.random()*8)+'s';
    s.style.animationDuration=(10+Math.random()*10)+'s';
    host.appendChild(s);
  }
})();

/* ===== pointer ripple helper (for .ripple) ===== */
document.body.addEventListener('click',function(e){
  const t=e.target.closest('.ripple'); if(!t) return;
  const r=t.getBoundingClientRect(), x=e.clientX-r.left, y=e.clientY-r.top;
  const el=document.createElement('i'); el.style.cssText='position:absolute;left:'+x+'px;top:'+y+'px;width:0;height:0;border-radius:50%;background:rgba(255,255,255,.4);transform:translate(-50%,-50%);animation:rip .6s ease-out forwards;pointer-events:none';
  t.appendChild(el); setTimeout(()=>el.remove(),650);
},{capture:true});
</script>
</body>
</html>
